/*! For license information please see map.js.LICENSE.txt */
(()=>{"use strict";var t={56:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},72:t=>{var n=[];function e(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].identifier===t){e=r;break}return e}function r(t,r){for(var i={},a=[],s=0;s<t.length;s++){var l=t[s],c=r.base?l[0]+r.base:l[0],u=i[c]||0,h="".concat(c," ").concat(u);i[c]=u+1;var f=e(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)n[f].references++,n[f].updater(p);else{var d=o(p,r);r.byIndex=s,n.splice(s,0,{identifier:h,updater:d,references:1})}a.push(h)}return a}function o(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=e(i[a]);n[s].references--}for(var l=r(t,o),c=0;c<i.length;c++){var u=e(i[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}i=l}}},113:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},290:(t,n,e)=>{t.exports=e.p+"assets/fonts/Clario-Regular.woff2"},314:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",r=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),r&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),r&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),e&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=e):u[2]=e),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),n.push(u))}},n}},354:t=>{t.exports=function(t){var n=t[1],e=t[3];if(!e)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */");return[n].concat([i]).join("\n")}return[n].join("\n")}},365:(t,n,e)=>{e.d(n,{A:()=>g});var r=e(354),o=e.n(r),i=e(314),a=e.n(i),s=e(417),l=e.n(s),c=new URL(e(290),e.b),u=new URL(e(591),e.b),h=new URL(e(627),e.b),f=a()(o());f.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&display=swap);"]);var p=l()(c),d=l()(u),A=l()(h);f.push([t.id,`/* src/styles.css */\n\n@font-face {\n  font-family: 'Clario';\n  src: url(${p}) format('woff2'); /* Adjust filename if needed */\n  font-weight: 600; /* Assuming regular maps to semi-bold 600 */\n}\n@font-face {\n  font-family: 'Clario';\n  src: url(${d}) format('woff2'); /* Adjust filename if needed */\n  font-weight: 700; /* Bold */\n}\n\n.viz-main-container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  font-family: 'Source Sans 3', sans-serif;\n}\n\n\n/* --- TYPOGRAPHIC SCALE & UTILITIES --- */\n/* --- FONT FAMILIES --- */\n.font-clario { font-family: 'Clario', sans-serif; }\n.font-source-sans { font-family: 'Source Sans 3', sans-serif; }\n\n/* --- FONT SIZES --- */\n.font-size-h1 { font-size: 26px; line-height: 1.2; font-weight: 700; }\n.font-size-h2 { font-size: 24px; line-height: 1.3; font-weight: 700; }\n.font-size-h3 { font-size: 20px; line-height: 1.2; font-weight: 600; }\n.font-size-h4 { font-size: 16px; line-height: 1.2; font-weight: 400; }\n\n\n/* Example Casing Utility */\n.text-all-caps {\n  text-transform: uppercase;\n}\n\n/* --- Map Search Bar --- */\n.map-search-container {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  z-index: 1002;\n  display: flex;\n  align-items: stretch;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\n}\n\n.map-search-container input[type="search"] {\n  border-right: none;\n  font-family: 'Source Sans 3', sans-serif;\n  font-size: 16px;\n}\n\n.map-search-container input[type="search"]::placeholder {\n    color: #aaa;\n}\n\n.map-search-container input[type="search"]::-webkit-search-cancel-button {\n  -webkit-appearance: none;\n  height: 14px;\n  width: 14px;\n  display: block;\n  background-image: url(${A});\n  background-repeat: no-repeat;\n  background-size: 14px 14px;\n  cursor: pointer;\n  margin-right: 5px;\n}\n\n.map-search-container input[type="search"]:focus {\n  border-color: #5a87c5;\n  box-shadow: 0 0 0 2px rgba(90, 135, 197, 0.1);\n  z-index: 1; \n  position: relative; \n}\n\n.search-dropdown-btn:hover {\n    background-color: #e0e0e0;\n}\n.search-dropdown-btn svg {\n  display: block;\n}\n\n.autocomplete-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  border-radius: 0 0 3px 3px;\n}\n\n.autocomplete-item {\n  padding: 8px 12px;\n  cursor: pointer;\n  color: #333;\n  border-bottom: 1px solid #eee;\n}\n.autocomplete-item:last-child {\n    border-bottom: none;\n}\n\n.autocomplete-item:hover {\n  background-color: #f0f0f0;\n}\n\n\n/* --- Styles for Map/Table Toggle Buttons --- */\n.view-toggle-controls {\n  position: absolute;\n  top: 10px;\n  left: 230px; \n  z-index: 1001;\n  display: flex;\n  transition: left 0.3s ease-in-out, right 0.3s ease-in-out;\n}\n.view-toggle-controls.controls-table-position {\n  left: auto;\n  right: 40px;\n}\n.view-buttons {\n  display: flex;\n  border: 1px solid #5a87c5;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\n  overflow: hidden;\n  height: 32px; \n}\n.view-btn {\n  background-color: #f0f0f0;\n  color: #277554;\n  border: none;\n  padding: 0 12px;\n  cursor: pointer;\n  transition: background-color 0.2s, color 0.2s;\n  display: flex;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  font-weight: 700;\n}\n.view-btn:first-child { border-right: 1px solid #ccc; }\n.view-btn:hover { background-color: #e0e0e0; }\n.view-btn.active {\n  background-color: #277554;\n  color: white;\n  font-weight: bold;\n}\n/* --- End Map/Table Toggle Button Styles --- */\n\n\n.content-host {\n  flex-grow: 1;\n  overflow: auto;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.map-content-host {\n  background-color: #f9f9f9;\n  height: 100%;\n}\n\n.map-content-host svg {\n    display: block;\n    background-color: #f9f9f9;\n}\n\n.map-content-host path.country {\n    stroke: white;\n    stroke-width: 0.5px;\n    fill: #cccccc;\n    transition: fill 0.1s ease-in-out;\n}\n.map-content-host path.country.has-data { cursor: pointer; }\n.map-content-host path.country.active {\n    fill: #e55353;\n}\n\n\n.sidebar {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 350px;\n  height: 100%;\n  box-shadow: -3px 0 15px rgba(0,0,0,0.15);\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n  transform: translateX(100%);\n  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  z-index: 10000;\n  display: flex;\n  flex-direction: column;\n  border-left: 1px solid rgba(0,0,0,0.1);\n}\n\n.sidebar.open {\n  transform: translateX(0);\n}\n\n.sidebar-close-button {\n  position: absolute;\n  top: 10px;\n  right: 15px;\n  color: #999;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  /* Apply H1 size */\n  font-size: 26px;\n  line-height: 1;\n}\n.sidebar-close-button:hover {\n  color: #333;\n}\n\n.sidebar > div[id$="-sidebar-content"] {\n  padding: 0; \n  overflow-y: auto;\n  flex-grow: 1;\n}\n\n.sidebar-header {\n    padding: 10px 50px 10px 20px; \n    color: #333;\n    margin: 0;\n}\n\n.sidebar-main-title {\n  margin: 0;\n  font-weight: 700; /* Bold */\n}\n\n.sidebar-country-name {\n  font-weight: 700; /* Bold */\n  margin-top: 0;\n  margin-bottom: 0;\n  margin-top: 5px;\n}\n\n\n.sidebar-subheader { /* General subheader like "Details" or "Quick Facts" */\n    margin-top: 25px;\n    color: #444;\n    padding: 15px 20px 5px 20px;\n}\n\n.sidebar-fact-list.grouped-facts {\n    padding: 0 20px 20px 20px;\n}\n\n.fact-item.grouped {\n    margin-top: 5px;\n    margin-bottom: 10px;\n}\n\n.sidebar-fact-list.grouped-facts .fact-item.grouped:first-child {\n    margin-top: 0;\n}\n\n.fact-item.grouped .fact-label {\n    color: #555;\n    margin-bottom: 2px;\n    letter-spacing: 0.5px;\n    font-weight: 700; /* Bold */\n}\n\nul.fact-value-list {\n    list-style-type: none; \n    padding-left: 0; \n    margin: 0;\n}\n\nli.fact-value-list-item {\n    color: #222; \n    white-space: pre-wrap; \n    word-wrap: break-word; \n    position: relative;\n    margin-bottom: 1px;\n    padding-left: 0; /* No padding by default */\n}\n\nli.fact-value-list-item.has-bullet {\n    padding-left: 15px; /* Only add padding when there's a bullet */\n}\n\nli.fact-value-list-item.has-bullet::before {\n    content: '•'; \n    position: absolute;\n    left: 0;\n    color: #555; \n}\n\n\n.map-tooltip {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.75);\n    border: none;\n    padding: 5px 10px;\n    border-radius: 3px;\n    color: #ffffff;\n    pointer-events: none;\n    white-space: nowrap;\n    z-index: 10010; \n    /* Apply styles */\n    font-family: 'Clario', sans-serif;\n    font-size: 16px;\n    font-weight: 400;\n}\n.map-tooltip::after { content: none; }\n\n\n.table-content-host {\n  overflow: auto;\n}\n.table-content-host table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.advanced-table-header-controls-wrapper {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n\n.table-content-host th,\n.table-content-host td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n  vertical-align: top;\n  font-size: 16px;\n  line-height: 1.5;\n  transition: background-color 0.3s ease;\n}\n.table-content-host th {\n  background-color: #f2f2f2;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  border-bottom: 2px solid #ccc;\n  font-family: 'Clario', sans-serif; /* Heading font */\n  font-weight: 600;\n}\n\n/* Row highlighting for selected country */\n.table-content-host tr.highlighted-row td {\n  background-color: #cfd1d1; /* Light blue */\n}\n\n.table-content-host tr.highlighted-row:hover td {\n  background-color: #D9F2FF; /* Slightly darker blue on hover */\n}\n\n\n.advanced-table-title {\n  color: #333333;\n  margin: 10px 0 20px 0; \n  padding-bottom: 10px;\n}\n\n.map-zoom-controls {\n  position: absolute;\n  bottom: 15px;\n  left: 15px;\n  z-index: 1001;\n  display: flex;\n  align-items: center; \n}\n.zoom-in-out-group {\n  display: flex;\n  border: 1px solid #888; \n  border-radius: 4px; \n  margin-right: 8px; \n  box-shadow: 0 1px 2px rgba(0,0,0,0.15);\n  overflow: hidden; \n  height: 32px;\n}\n.zoom-in-out-group button {\n  background-color: #fff; color: #333; border: none; padding: 0;\n  width: 30px; height: 100%; cursor: pointer;\n  display: flex; align-items: center;\n  justify-content: center; transition: background-color 0.2s;\n  box-sizing: border-box;\n  font-size: 20px;\n  line-height: 1;\n  font-weight: 600;\n}\n\n.zoom-in-out-group button.zoom-out-btn {\n    position: relative;\n    top: -1px;\n}\n\n.zoom-in-out-group button:hover { background-color: #f0f0f0; }\n.zoom-in-out-group button:first-child { border-right: 1px solid #ccc; }\n\n.map-zoom-controls .zoom-reset-button {\n  background-color: #fff; border: 1px solid #888; color: #333;\n  padding: 0 10px; height: 32px; cursor: pointer;\n  border-radius: 4px; display: flex; align-items: center;\n  justify-content: center; box-shadow: 0 1px 2px rgba(0,0,0,0.15);\n  transition: background-color 0.2s;\n  box-sizing: border-box;\n  /* Apply H4 size */\n  font-size: 16px;\n  line-height: 1.5;\n  font-weight: 400;\n}\n.map-zoom-controls .zoom-reset-button:hover { background-color: #f0f0f0; }  \n\n/* --- Added Sidebar Footer Styles --- */\n.sidebar-footer {\n  padding: 15px 20px;\n  border-top: 1px solid rgba(0,0,0,0.08);\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  margin-top: auto;\n  background-color: transparent;\n}\n\n.sidebar-footer-btn {\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  border: 1px solid #ccc;\n  transition: background-color 0.2s, border-color 0.2s;\n  font-weight: 600; /* Bolder for buttons */\n}\n\n.sidebar-footer-btn.profile-btn {\n  background-color: #277554;\n  color: white;\n  border-color: #277554;\n}\n\n.sidebar-footer-btn.profile-btn:hover {\n  background-color: #1e5a40;\n  border-color: #1e5a40;\n}\n\n.sidebar-footer-btn.close-btn {\n  background-color: #ffffff;\n  color: #333;\n  border-color: #ccc;\n  margin-left: auto;\n}\n\n.sidebar-footer-btn.close-btn:hover {\n  background-color: #f0f0f0;\n}`,"",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA,mBAAmB;;AAInB;EACE,qBAAqB;EACrB,4DAA+D,EAAE,8BAA8B;EAC/F,gBAAgB,EAAE,2CAA2C;AAC/D;AACA;EACE,qBAAqB;EACrB,4DAA4D,EAAE,8BAA8B;EAC5F,gBAAgB,EAAE,SAAS;AAC7B;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,YAAY;EACZ,WAAW;EACX,sBAAsB;EACtB,kBAAkB;EAClB,gBAAgB;EAChB,wCAAwC;AAC1C;;;AAGA,0CAA0C;AAC1C,0BAA0B;AAC1B,eAAe,iCAAiC,EAAE;AAClD,oBAAoB,wCAAwC,EAAE;;AAE9D,uBAAuB;AACvB,gBAAgB,eAAe,EAAE,gBAAgB,EAAE,gBAAgB,EAAE;AACrE,gBAAgB,eAAe,EAAE,gBAAgB,EAAE,gBAAgB,EAAE;AACrE,gBAAgB,eAAe,EAAE,gBAAgB,EAAE,gBAAgB,EAAE;AACrE,gBAAgB,eAAe,EAAE,gBAAgB,EAAE,gBAAgB,EAAE;;;AAGrE,2BAA2B;AAC3B;EACE,yBAAyB;AAC3B;;AAEA,2BAA2B;AAC3B;EACE,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,aAAa;EACb,aAAa;EACb,oBAAoB;EACpB,kBAAkB;EAClB,qCAAqC;AACvC;;AAEA;EACE,kBAAkB;EAClB,wCAAwC;EACxC,eAAe;AACjB;;AAEA;IACI,WAAW;AACf;;AAEA;EACE,wBAAwB;EACxB,YAAY;EACZ,WAAW;EACX,cAAc;EACd,yDAAqU;EACrU,4BAA4B;EAC5B,0BAA0B;EAC1B,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,qBAAqB;EACrB,6CAA6C;EAC7C,UAAU;EACV,kBAAkB;AACpB;;AAEA;IACI,yBAAyB;AAC7B;AACA;EACE,cAAc;AAChB;;AAEA;EACE,gBAAgB;EAChB,UAAU;EACV,SAAS;EACT,0BAA0B;AAC5B;;AAEA;EACE,iBAAiB;EACjB,eAAe;EACf,WAAW;EACX,6BAA6B;AAC/B;AACA;IACI,mBAAmB;AACvB;;AAEA;EACE,yBAAyB;AAC3B;;;AAGA,gDAAgD;AAChD;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,aAAa;EACb,aAAa;EACb,yDAAyD;AAC3D;AACA;EACE,UAAU;EACV,WAAW;AACb;AACA;EACE,aAAa;EACb,yBAAyB;EACzB,kBAAkB;EAClB,qCAAqC;EACrC,gBAAgB;EAChB,YAAY;AACd;AACA;EACE,yBAAyB;EACzB,cAAc;EACd,YAAY;EACZ,eAAe;EACf,eAAe;EACf,6CAA6C;EAC7C,aAAa;EACb,mBAAmB;EACnB,YAAY;EACZ,sBAAsB;EACtB,gBAAgB;AAClB;AACA,wBAAwB,4BAA4B,EAAE;AACtD,kBAAkB,yBAAyB,EAAE;AAC7C;EACE,yBAAyB;EACzB,YAAY;EACZ,iBAAiB;AACnB;AACA,+CAA+C;;;AAG/C;EACE,YAAY;EACZ,cAAc;EACd,kBAAkB;EAClB,WAAW;EACX,sBAAsB;AACxB;;AAEA;EACE,yBAAyB;EACzB,YAAY;AACd;;AAEA;IACI,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,aAAa;IACb,iCAAiC;AACrC;AACA,0CAA0C,eAAe,EAAE;AAC3D;IACI,aAAa;AACjB;;;AAGA;EACE,kBAAkB;EAClB,QAAQ;EACR,MAAM;EACN,YAAY;EACZ,YAAY;EACZ,wCAAwC;EACxC,0BAA0B;EAC1B,kCAAkC;EAClC,2BAA2B;EAC3B,+DAA+D;EAC/D,cAAc;EACd,aAAa;EACb,sBAAsB;EACtB,sCAAsC;AACxC;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,WAAW;EACX,gBAAgB;EAChB,YAAY;EACZ,eAAe;EACf,UAAU;EACV,kBAAkB;EAClB,eAAe;EACf,cAAc;AAChB;AACA;EACE,WAAW;AACb;;AAEA;EACE,UAAU;EACV,gBAAgB;EAChB,YAAY;AACd;;AAEA;IACI,4BAA4B;IAC5B,WAAW;IACX,SAAS;AACb;;AAEA;EACE,SAAS;EACT,gBAAgB,EAAE,SAAS;AAC7B;;AAEA;EACE,gBAAgB,EAAE,SAAS;EAC3B,aAAa;EACb,gBAAgB;EAChB,eAAe;AACjB;;;AAGA,qBAAqB,sDAAsD;IACvE,gBAAgB;IAChB,WAAW;IACX,2BAA2B;AAC/B;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,qBAAqB;IACrB,gBAAgB,EAAE,SAAS;AAC/B;;AAEA;IACI,qBAAqB;IACrB,eAAe;IACf,SAAS;AACb;;AAEA;IACI,WAAW;IACX,qBAAqB;IACrB,qBAAqB;IACrB,kBAAkB;IAClB,kBAAkB;IAClB,eAAe,EAAE,0BAA0B;AAC/C;;AAEA;IACI,kBAAkB,EAAE,2CAA2C;AACnE;;AAEA;IACI,YAAY;IACZ,kBAAkB;IAClB,OAAO;IACP,WAAW;AACf;;;AAGA;IACI,kBAAkB;IAClB,+BAA+B;IAC/B,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;IAClB,cAAc;IACd,oBAAoB;IACpB,mBAAmB;IACnB,cAAc;IACd,iBAAiB;IACjB,iCAAiC;IACjC,eAAe;IACf,gBAAgB;AACpB;AACA,sBAAsB,aAAa,EAAE;;;AAGrC;EACE,cAAc;AAChB;AACA;EACE,WAAW;EACX,yBAAyB;AAC3B;;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;EACnB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;;EAEE,sBAAsB;EACtB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,eAAe;EACf,gBAAgB;EAChB,sCAAsC;AACxC;AACA;EACE,yBAAyB;EACzB,gBAAgB;EAChB,MAAM;EACN,WAAW;EACX,6BAA6B;EAC7B,iCAAiC,EAAE,iBAAiB;EACpD,gBAAgB;AAClB;;AAEA,0CAA0C;AAC1C;EACE,yBAAyB,EAAE,eAAe;AAC5C;;AAEA;EACE,yBAAyB,EAAE,kCAAkC;AAC/D;;;AAGA;EACE,cAAc;EACd,qBAAqB;EACrB,oBAAoB;AACtB;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,aAAa;EACb,aAAa;EACb,mBAAmB;AACrB;AACA;EACE,aAAa;EACb,sBAAsB;EACtB,kBAAkB;EAClB,iBAAiB;EACjB,sCAAsC;EACtC,gBAAgB;EAChB,YAAY;AACd;AACA;EACE,sBAAsB,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU;EAC7D,WAAW,EAAE,YAAY,EAAE,eAAe;EAC1C,aAAa,EAAE,mBAAmB;EAClC,uBAAuB,EAAE,iCAAiC;EAC1D,sBAAsB;EACtB,eAAe;EACf,cAAc;EACd,gBAAgB;AAClB;;AAEA;IACI,kBAAkB;IAClB,SAAS;AACb;;AAEA,kCAAkC,yBAAyB,EAAE;AAC7D,wCAAwC,4BAA4B,EAAE;;AAEtE;EACE,sBAAsB,EAAE,sBAAsB,EAAE,WAAW;EAC3D,eAAe,EAAE,YAAY,EAAE,eAAe;EAC9C,kBAAkB,EAAE,aAAa,EAAE,mBAAmB;EACtD,uBAAuB,EAAE,sCAAsC;EAC/D,iCAAiC;EACjC,sBAAsB;EACtB,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,gBAAgB;AAClB;AACA,8CAA8C,yBAAyB,EAAE;;AAEzE,wCAAwC;AACxC;EACE,kBAAkB;EAClB,sCAAsC;EACtC,aAAa;EACb,SAAS;EACT,mBAAmB;EACnB,gBAAgB;EAChB,6BAA6B;AAC/B;;AAEA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,eAAe;EACf,sBAAsB;EACtB,oDAAoD;EACpD,gBAAgB,EAAE,uBAAuB;AAC3C;;AAEA;EACE,yBAAyB;EACzB,YAAY;EACZ,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,WAAW;EACX,kBAAkB;EAClB,iBAAiB;AACnB;;AAEA;EACE,yBAAyB;AAC3B",sourcesContent:["/* src/styles.css */\r\n\r\n@import url('https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&display=swap');\r\n\r\n@font-face {\r\n  font-family: 'Clario';\r\n  src: url('./assets/fonts/Clario-Regular.woff2') format('woff2'); /* Adjust filename if needed */\r\n  font-weight: 600; /* Assuming regular maps to semi-bold 600 */\r\n}\r\n@font-face {\r\n  font-family: 'Clario';\r\n  src: url('./assets/fonts/Clario-Bold.woff2') format('woff2'); /* Adjust filename if needed */\r\n  font-weight: 700; /* Bold */\r\n}\r\n\r\n.viz-main-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  overflow: hidden;\r\n  font-family: 'Source Sans 3', sans-serif;\r\n}\r\n\r\n\r\n/* --- TYPOGRAPHIC SCALE & UTILITIES --- */\r\n/* --- FONT FAMILIES --- */\r\n.font-clario { font-family: 'Clario', sans-serif; }\r\n.font-source-sans { font-family: 'Source Sans 3', sans-serif; }\r\n\r\n/* --- FONT SIZES --- */\r\n.font-size-h1 { font-size: 26px; line-height: 1.2; font-weight: 700; }\r\n.font-size-h2 { font-size: 24px; line-height: 1.3; font-weight: 700; }\r\n.font-size-h3 { font-size: 20px; line-height: 1.2; font-weight: 600; }\r\n.font-size-h4 { font-size: 16px; line-height: 1.2; font-weight: 400; }\r\n\r\n\r\n/* Example Casing Utility */\r\n.text-all-caps {\r\n  text-transform: uppercase;\r\n}\r\n\r\n/* --- Map Search Bar --- */\r\n.map-search-container {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 10px;\r\n  z-index: 1002;\r\n  display: flex;\r\n  align-items: stretch;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\r\n}\r\n\r\n.map-search-container input[type=\"search\"] {\r\n  border-right: none;\r\n  font-family: 'Source Sans 3', sans-serif;\r\n  font-size: 16px;\r\n}\r\n\r\n.map-search-container input[type=\"search\"]::placeholder {\r\n    color: #aaa;\r\n}\r\n\r\n.map-search-container input[type=\"search\"]::-webkit-search-cancel-button {\r\n  -webkit-appearance: none;\r\n  height: 14px;\r\n  width: 14px;\r\n  display: block;\r\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAn0lEQVR42u3WwQnFIAwF0M0sCLgI0xKzQISg62jRrHjTqzH3wD/4i0nKiQBPxQA8f8LLEYAFAAEg/UkbxM0MHBZFgQDx4v8Y31mYeP4XyL8/x+IEAPgGgPgTgaJQRK8k9qNwoJk8sA1mJc7gJMa1AIA3k3xZANB0AFQDgG8/xAEQ+AECGQA0agIQAGbTjAIwLwL9+0DXAEMEi5Xo3FwL+QAAAABJRU5ErkJggg==);\r\n  background-repeat: no-repeat;\r\n  background-size: 14px 14px;\r\n  cursor: pointer;\r\n  margin-right: 5px;\r\n}\r\n\r\n.map-search-container input[type=\"search\"]:focus {\r\n  border-color: #5a87c5;\r\n  box-shadow: 0 0 0 2px rgba(90, 135, 197, 0.1);\r\n  z-index: 1; \r\n  position: relative; \r\n}\r\n\r\n.search-dropdown-btn:hover {\r\n    background-color: #e0e0e0;\r\n}\r\n.search-dropdown-btn svg {\r\n  display: block;\r\n}\r\n\r\n.autocomplete-list {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  border-radius: 0 0 3px 3px;\r\n}\r\n\r\n.autocomplete-item {\r\n  padding: 8px 12px;\r\n  cursor: pointer;\r\n  color: #333;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.autocomplete-item:last-child {\r\n    border-bottom: none;\r\n}\r\n\r\n.autocomplete-item:hover {\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n\r\n/* --- Styles for Map/Table Toggle Buttons --- */\r\n.view-toggle-controls {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 230px; \r\n  z-index: 1001;\r\n  display: flex;\r\n  transition: left 0.3s ease-in-out, right 0.3s ease-in-out;\r\n}\r\n.view-toggle-controls.controls-table-position {\r\n  left: auto;\r\n  right: 40px;\r\n}\r\n.view-buttons {\r\n  display: flex;\r\n  border: 1px solid #5a87c5;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\r\n  overflow: hidden;\r\n  height: 32px; \r\n}\r\n.view-btn {\r\n  background-color: #f0f0f0;\r\n  color: #277554;\r\n  border: none;\r\n  padding: 0 12px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s, color 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  font-weight: 700;\r\n}\r\n.view-btn:first-child { border-right: 1px solid #ccc; }\r\n.view-btn:hover { background-color: #e0e0e0; }\r\n.view-btn.active {\r\n  background-color: #277554;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n/* --- End Map/Table Toggle Button Styles --- */\r\n\r\n\r\n.content-host {\r\n  flex-grow: 1;\r\n  overflow: auto;\r\n  position: relative;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.map-content-host {\r\n  background-color: #f9f9f9;\r\n  height: 100%;\r\n}\r\n\r\n.map-content-host svg {\r\n    display: block;\r\n    background-color: #f9f9f9;\r\n}\r\n\r\n.map-content-host path.country {\r\n    stroke: white;\r\n    stroke-width: 0.5px;\r\n    fill: #cccccc;\r\n    transition: fill 0.1s ease-in-out;\r\n}\r\n.map-content-host path.country.has-data { cursor: pointer; }\r\n.map-content-host path.country.active {\r\n    fill: #e55353;\r\n}\r\n\r\n\r\n.sidebar {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  width: 350px;\r\n  height: 100%;\r\n  box-shadow: -3px 0 15px rgba(0,0,0,0.15);\r\n  backdrop-filter: blur(5px);\r\n  -webkit-backdrop-filter: blur(5px);\r\n  transform: translateX(100%);\r\n  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n  z-index: 10000;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-left: 1px solid rgba(0,0,0,0.1);\r\n}\r\n\r\n.sidebar.open {\r\n  transform: translateX(0);\r\n}\r\n\r\n.sidebar-close-button {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 15px;\r\n  color: #999;\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  /* Apply H1 size */\r\n  font-size: 26px;\r\n  line-height: 1;\r\n}\r\n.sidebar-close-button:hover {\r\n  color: #333;\r\n}\r\n\r\n.sidebar > div[id$=\"-sidebar-content\"] {\r\n  padding: 0; \r\n  overflow-y: auto;\r\n  flex-grow: 1;\r\n}\r\n\r\n.sidebar-header {\r\n    padding: 10px 50px 10px 20px; \r\n    color: #333;\r\n    margin: 0;\r\n}\r\n\r\n.sidebar-main-title {\r\n  margin: 0;\r\n  font-weight: 700; /* Bold */\r\n}\r\n\r\n.sidebar-country-name {\r\n  font-weight: 700; /* Bold */\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  margin-top: 5px;\r\n}\r\n\r\n\r\n.sidebar-subheader { /* General subheader like \"Details\" or \"Quick Facts\" */\r\n    margin-top: 25px;\r\n    color: #444;\r\n    padding: 15px 20px 5px 20px;\r\n}\r\n\r\n.sidebar-fact-list.grouped-facts {\r\n    padding: 0 20px 20px 20px;\r\n}\r\n\r\n.fact-item.grouped {\r\n    margin-top: 5px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.sidebar-fact-list.grouped-facts .fact-item.grouped:first-child {\r\n    margin-top: 0;\r\n}\r\n\r\n.fact-item.grouped .fact-label {\r\n    color: #555;\r\n    margin-bottom: 2px;\r\n    letter-spacing: 0.5px;\r\n    font-weight: 700; /* Bold */\r\n}\r\n\r\nul.fact-value-list {\r\n    list-style-type: none; \r\n    padding-left: 0; \r\n    margin: 0;\r\n}\r\n\r\nli.fact-value-list-item {\r\n    color: #222; \r\n    white-space: pre-wrap; \r\n    word-wrap: break-word; \r\n    position: relative;\r\n    margin-bottom: 1px;\r\n    padding-left: 0; /* No padding by default */\r\n}\r\n\r\nli.fact-value-list-item.has-bullet {\r\n    padding-left: 15px; /* Only add padding when there's a bullet */\r\n}\r\n\r\nli.fact-value-list-item.has-bullet::before {\r\n    content: '•'; \r\n    position: absolute;\r\n    left: 0;\r\n    color: #555; \r\n}\r\n\r\n\r\n.map-tooltip {\r\n    position: absolute;\r\n    background: rgba(0, 0, 0, 0.75);\r\n    border: none;\r\n    padding: 5px 10px;\r\n    border-radius: 3px;\r\n    color: #ffffff;\r\n    pointer-events: none;\r\n    white-space: nowrap;\r\n    z-index: 10010; \r\n    /* Apply styles */\r\n    font-family: 'Clario', sans-serif;\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n}\r\n.map-tooltip::after { content: none; }\r\n\r\n\r\n.table-content-host {\r\n  overflow: auto;\r\n}\r\n.table-content-host table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.advanced-table-header-controls-wrapper {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.table-content-host th,\r\n.table-content-host td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n  text-align: left;\r\n  vertical-align: top;\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  transition: background-color 0.3s ease;\r\n}\r\n.table-content-host th {\r\n  background-color: #f2f2f2;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  border-bottom: 2px solid #ccc;\r\n  font-family: 'Clario', sans-serif; /* Heading font */\r\n  font-weight: 600;\r\n}\r\n\r\n/* Row highlighting for selected country */\r\n.table-content-host tr.highlighted-row td {\r\n  background-color: #cfd1d1; /* Light blue */\r\n}\r\n\r\n.table-content-host tr.highlighted-row:hover td {\r\n  background-color: #D9F2FF; /* Slightly darker blue on hover */\r\n}\r\n\r\n\r\n.advanced-table-title {\r\n  color: #333333;\r\n  margin: 10px 0 20px 0; \r\n  padding-bottom: 10px;\r\n}\r\n\r\n.map-zoom-controls {\r\n  position: absolute;\r\n  bottom: 15px;\r\n  left: 15px;\r\n  z-index: 1001;\r\n  display: flex;\r\n  align-items: center; \r\n}\r\n.zoom-in-out-group {\r\n  display: flex;\r\n  border: 1px solid #888; \r\n  border-radius: 4px; \r\n  margin-right: 8px; \r\n  box-shadow: 0 1px 2px rgba(0,0,0,0.15);\r\n  overflow: hidden; \r\n  height: 32px;\r\n}\r\n.zoom-in-out-group button {\r\n  background-color: #fff; color: #333; border: none; padding: 0;\r\n  width: 30px; height: 100%; cursor: pointer;\r\n  display: flex; align-items: center;\r\n  justify-content: center; transition: background-color 0.2s;\r\n  box-sizing: border-box;\r\n  font-size: 20px;\r\n  line-height: 1;\r\n  font-weight: 600;\r\n}\r\n\r\n.zoom-in-out-group button.zoom-out-btn {\r\n    position: relative;\r\n    top: -1px;\r\n}\r\n\r\n.zoom-in-out-group button:hover { background-color: #f0f0f0; }\r\n.zoom-in-out-group button:first-child { border-right: 1px solid #ccc; }\r\n\r\n.map-zoom-controls .zoom-reset-button {\r\n  background-color: #fff; border: 1px solid #888; color: #333;\r\n  padding: 0 10px; height: 32px; cursor: pointer;\r\n  border-radius: 4px; display: flex; align-items: center;\r\n  justify-content: center; box-shadow: 0 1px 2px rgba(0,0,0,0.15);\r\n  transition: background-color 0.2s;\r\n  box-sizing: border-box;\r\n  /* Apply H4 size */\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  font-weight: 400;\r\n}\r\n.map-zoom-controls .zoom-reset-button:hover { background-color: #f0f0f0; }  \r\n\r\n/* --- Added Sidebar Footer Styles --- */\r\n.sidebar-footer {\r\n  padding: 15px 20px;\r\n  border-top: 1px solid rgba(0,0,0,0.08);\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n  margin-top: auto;\r\n  background-color: transparent;\r\n}\r\n\r\n.sidebar-footer-btn {\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  border: 1px solid #ccc;\r\n  transition: background-color 0.2s, border-color 0.2s;\r\n  font-weight: 600; /* Bolder for buttons */\r\n}\r\n\r\n.sidebar-footer-btn.profile-btn {\r\n  background-color: #277554;\r\n  color: white;\r\n  border-color: #277554;\r\n}\r\n\r\n.sidebar-footer-btn.profile-btn:hover {\r\n  background-color: #1e5a40;\r\n  border-color: #1e5a40;\r\n}\r\n\r\n.sidebar-footer-btn.close-btn {\r\n  background-color: #ffffff;\r\n  color: #333;\r\n  border-color: #ccc;\r\n  margin-left: auto;\r\n}\r\n\r\n.sidebar-footer-btn.close-btn:hover {\r\n  background-color: #f0f0f0;\r\n}"],sourceRoot:""}]);const g=f},417:t=>{t.exports=function(t,n){return n||(n={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]|(%20)/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},540:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},591:(t,n,e)=>{t.exports=e.p+"assets/fonts/Clario-Bold.woff2"},627:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAn0lEQVR42u3WwQnFIAwF0M0sCLgI0xKzQISg62jRrHjTqzH3wD/4i0nKiQBPxQA8f8LLEYAFAAEg/UkbxM0MHBZFgQDx4v8Y31mYeP4XyL8/x+IEAPgGgPgTgaJQRK8k9qNwoJk8sA1mJc7gJMa1AIA3k3xZANB0AFQDgG8/xAEQ+AECGQA0agIQAGbTjAIwLwL9+0DXAEMEi5Xo3FwL+QAAAABJRU5ErkJggg=="},659:t=>{var n={};t.exports=function(t,e){var r=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,o&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var i=e.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return t[r](i,i.exports,e),i.exports}e.m=t,e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.b=document.baseURI||self.location.href,e.nc=void 0;var r=e(72),o=e.n(r),i=e(825),a=e.n(i),s=e(659),l=e.n(s),c=e(56),u=e.n(c),h=e(540),f=e.n(h),p=e(113),d=e.n(p),A=e(365),g={};g.styleTagTransform=d(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=f(),o()(A.A,g),A.A&&A.A.locals&&A.A.locals;var m={default_view:{type:"string",label:"Default View on Load",display:"radio",values:[{"Map View":"map"},{"Table View":"table"}],default:"map",section:"General",order:1},map_view_title:{label:"--- Map View ---",section:"Map",readonly:!0,order:10},map_color_default:{type:"string",label:"Default Country Color",display:"color",default:"#cccccc",section:"Map",order:11},map_color_hover:{type:"string",label:"Hover Country Color",display:"color",default:"#a0a0a0",section:"Map",order:12},map_color_selected:{type:"string",label:"Selected Country Color",display:"color",default:"#e55353",section:"Map",order:13},sidebar_options_title:{label:"--- Sidebar Options ---",section:"Sidebar",readonly:!0,order:20},sidebar_color:{type:"string",label:"Sidebar Background Color",display:"color",default:"#FFFFFF",section:"Sidebar",order:21},sidebar_opacity:{type:"number",label:"Sidebar Opacity",display:"slider",min:0,max:1,step:.05,default:.8,section:"Sidebar",order:22},sidebar_profile_button_title:{label:"--- Profile Button ---",section:"Sidebar",readonly:!0,order:27},country_profile_button_text:{type:"string",label:"Button Text",default:"Country profile",section:"Sidebar",order:28},profile_button_url_field:{type:"string",label:"Field for Profile URL",display:"select",default:"",section:"Sidebar",order:31},table_display_options_title:{label:"--- Table Options ---",section:"Table",order:100,readonly:!0},show_full_field_name:{type:"boolean",label:"Table Headers: Show Full Field Name",default:!1,section:"Table",order:101},table_title_text:{type:"string",label:"Table Title",default:"Quick facts",section:"Table",order:102}};function v(){}function y(t){return null==t?v:function(){return this.querySelector(t)}}function b(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function _(){return[]}function w(t){return null==t?_:function(){return this.querySelectorAll(t)}}function C(t){return function(){return this.matches(t)}}function E(t){return function(n){return n.matches(t)}}var x=Array.prototype.find;function B(){return this.firstElementChild}var k=Array.prototype.filter;function S(){return this.children}function z(t){return new Array(t.length)}function M(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function I(t,n,e,r,o,i){for(var a,s=0,l=n.length,c=i.length;s<c;++s)(a=n[s])?(a.__data__=i[s],r[s]=a):e[s]=new M(t,i[s]);for(;s<l;++s)(a=n[s])&&(o[s]=a)}function T(t,n,e,r,o,i,a){var s,l,c,u=new Map,h=n.length,f=i.length,p=new Array(h);for(s=0;s<h;++s)(l=n[s])&&(p[s]=c=a.call(l,l.__data__,s,n)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<f;++s)c=a.call(t,i[s],s,i)+"",(l=u.get(c))?(r[s]=l,l.__data__=i[s],u.delete(c)):e[s]=new M(t,i[s]);for(s=0;s<h;++s)(l=n[s])&&u.get(p[s])===l&&(o[s]=l)}function N(t){return t.__data__}function L(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}M.prototype={constructor:M,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var R="http://www.w3.org/1999/xhtml";const q={svg:"http://www.w3.org/2000/svg",xhtml:R,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),q.hasOwnProperty(n)?{space:q[n],local:t}:t}function D(t){return function(){this.removeAttribute(t)}}function P(t){return function(){this.removeAttributeNS(t.space,t.local)}}function F(t,n){return function(){this.setAttribute(t,n)}}function j(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function V(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function H(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function U(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Y(t){return function(){this.style.removeProperty(t)}}function G(t,n,e){return function(){this.style.setProperty(t,n,e)}}function W(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function X(t,n){return t.style.getPropertyValue(n)||U(t).getComputedStyle(t,null).getPropertyValue(n)}function Q(t){return function(){delete this[t]}}function Z(t,n){return function(){this[t]=n}}function J(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function K(t){return t.trim().split(/^|\s+/)}function $(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=K(t.getAttribute("class")||"")}function nt(t,n){for(var e=$(t),r=-1,o=n.length;++r<o;)e.add(n[r])}function et(t,n){for(var e=$(t),r=-1,o=n.length;++r<o;)e.remove(n[r])}function rt(t){return function(){nt(this,t)}}function ot(t){return function(){et(this,t)}}function it(t,n){return function(){(n.apply(this,arguments)?nt:et)(this,t)}}function at(){this.textContent=""}function st(t){return function(){this.textContent=t}}function lt(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function ct(){this.innerHTML=""}function ut(t){return function(){this.innerHTML=t}}function ht(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function ft(){this.nextSibling&&this.parentNode.appendChild(this)}function pt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===R&&n.documentElement.namespaceURI===R?n.createElement(t):n.createElementNS(e,t)}}function At(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function gt(t){var n=O(t);return(n.local?At:dt)(n)}function mt(){return null}function vt(){var t=this.parentNode;t&&t.removeChild(this)}function yt(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function bt(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function _t(t){return function(){var n=this.__on;if(n){for(var e,r=0,o=-1,i=n.length;r<i;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++o]=e:this.removeEventListener(e.type,e.listener,e.options);++o?n.length=o:delete this.__on}}}function wt(t,n,e){return function(){var r,o=this.__on,i=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=e),void(r.value=n);this.addEventListener(t.type,i,e),r={type:t.type,name:t.name,value:n,listener:i,options:e},o?o.push(r):this.__on=[r]}}function Ct(t,n,e){var r=U(t),o=r.CustomEvent;"function"==typeof o?o=new o(n,e):(o=r.document.createEvent("Event"),e?(o.initEvent(n,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function Et(t,n){return function(){return Ct(this,t,n)}}function xt(t,n){return function(){return Ct(this,t,n.apply(this,arguments))}}tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Bt=[null];function kt(t,n){this._groups=t,this._parents=n}function St(){return new kt([[document.documentElement]],Bt)}kt.prototype=St.prototype={constructor:kt,select:function(t){"function"!=typeof t&&(t=y(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,a,s=n[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=t.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),c[u]=a);return new kt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);return null==n?[]:b(n)}}(t):w(t);for(var n=this._groups,e=n.length,r=[],o=[],i=0;i<e;++i)for(var a,s=n[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),o.push(a));return new kt(r,o)},selectChild:function(t){return this.select(null==t?B:function(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:E(t)))},selectChildren:function(t){return this.selectAll(null==t?S:function(t){return function(){return k.call(this.children,t)}}("function"==typeof t?t:E(t)))},filter:function(t){"function"!=typeof t&&(t=C(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,a=n[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new kt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,N);var e,r=n?T:I,o=this._parents,i=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=o[u],f=i[u],p=f.length,d=b(t.call(h,h&&h.__data__,u,o)),A=d.length,g=l[u]=new Array(A),m=s[u]=new Array(A);r(h,f,g,m,c[u]=new Array(p),d,n);for(var v,y,_=0,w=0;_<A;++_)if(v=g[_]){for(_>=w&&(w=_+1);!(y=m[w])&&++w<A;);v._next=y||null}}return(s=new kt(s,o))._enter=l,s._exit=c,s},enter:function(){return new kt(this._enter||this._groups.map(z),this._parents)},exit:function(){return new kt(this._exit||this._groups.map(z),this._parents)},join:function(t,n,e){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(o=n(o)),null==e?i.remove():e(i),r&&o?r.merge(o).order():o},merge:function(t){if(!(t instanceof kt))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,o=e.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=n[s],u=e[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(f[p]=l);for(;s<r;++s)a[s]=n[s];return new kt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,o=t[n],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=L);for(var e=this._groups,r=e.length,o=new Array(r),i=0;i<r;++i){for(var a,s=e[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(n)}return new kt(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var o,i=n[e],a=0,s=i.length;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,n){var e=O(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?P:D:"function"==typeof n?e.local?H:V:e.local?j:F)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?Y:"function"==typeof n?W:G)(t,n,null==e?"":e)):X(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?Q:"function"==typeof n?J:Z)(t,n)):this.node()[t]},classed:function(t,n){var e=K(t+"");if(arguments.length<2){for(var r=$(this.node()),o=-1,i=e.length;++o<i;)if(!r.contains(e[o]))return!1;return!0}return this.each(("function"==typeof n?it:n?rt:ot)(e,n))},text:function(t){return arguments.length?this.each(null==t?at:("function"==typeof t?lt:st)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?ht:ut)(t)):this.node().innerHTML},raise:function(){return this.each(ft)},lower:function(){return this.each(pt)},append:function(t){var n="function"==typeof t?t:gt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:gt(t),r=null==n?mt:"function"==typeof n?n:y(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(vt)},clone:function(t){return this.select(t?bt:yt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,o,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),a=i.length;if(!(arguments.length<2)){for(s=n?wt:_t,r=0;r<a;++r)this.each(s(i[r],n,e));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,n){return this.each(("function"==typeof n?xt:Et)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,o=t[n],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const zt=St;var Mt={value:()=>{}};function It(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Tt(r)}function Tt(t){this._=t}function Nt(t,n){for(var e,r=0,o=t.length;r<o;++r)if((e=t[r]).name===n)return e.value}function Lt(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=Mt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Tt.prototype=It.prototype={constructor:Tt,on:function(t,n){var e,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=i[a]).type)o[e]=Lt(o[e],t.name,n);else if(null==n)for(e in o)o[e]=Lt(o[e],t.name,null);return this}for(;++a<s;)if((e=(t=i[a]).type)&&(e=Nt(o[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Tt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,e=(r=this._[t]).length;i<e;++i)r[i].value.apply(n,o)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(n,e)}};const Rt=It;var qt,Ot,Dt=0,Pt=0,Ft=0,jt=0,Vt=0,Ht=0,Ut="object"==typeof performance&&performance.now?performance:Date,Yt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gt(){return Vt||(Yt(Wt),Vt=Ut.now()+Ht)}function Wt(){Vt=0}function Xt(){this._call=this._time=this._next=null}function Qt(t,n,e){var r=new Xt;return r.restart(t,n,e),r}function Zt(){Vt=(jt=Ut.now())+Ht,Dt=Pt=0;try{!function(){Gt(),++Dt;for(var t,n=qt;n;)(t=Vt-n._time)>=0&&n._call.call(null,t),n=n._next;--Dt}()}finally{Dt=0,function(){for(var t,n,e=qt,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qt=n);Ot=t,Kt(r)}(),Vt=0}}function Jt(){var t=Ut.now(),n=t-jt;n>1e3&&(Ht-=n,jt=t)}function Kt(t){Dt||(Pt&&(Pt=clearTimeout(Pt)),t-Vt>24?(t<1/0&&(Pt=setTimeout(Zt,t-Ut.now()-Ht)),Ft&&(Ft=clearInterval(Ft))):(Ft||(jt=Ut.now(),Ft=setInterval(Jt,1e3)),Dt=1,Yt(Zt)))}function $t(t,n,e){var r=new Xt;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Xt.prototype=Qt.prototype={constructor:Xt,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Gt():+e)+(null==n?0:+n),this._next||Ot===this||(Ot?Ot._next=this:qt=this,Ot=this),this._call=t,this._time=e,Kt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kt())}};var tn=Rt("start","end","cancel","interrupt"),nn=[];function en(t,n,e,r,o,i){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,o=t.__transition;function i(l){var c,u,h,f;if(1!==e.state)return s();for(c in o)if((f=o[c]).name===e.name){if(3===f.state)return $t(i);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete o[c]):+c<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete o[c])}if($t((function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(l))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(h=e.tween.length),c=0,u=-1;c<h;++c)(f=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++u]=f);r.length=u+1}}function a(n){for(var o=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(s),e.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(t,o);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),s())}function s(){for(var r in e.state=6,e.timer.stop(),delete o[n],o)return;delete t.__transition}o[n]=e,e.timer=Qt((function(t){e.state=1,e.timer.restart(i,e.delay,e.time),e.delay<=t&&i(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:o,on:tn,tween:nn,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function rn(t,n){var e=an(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function on(t,n){var e=an(t,n);if(e.state>3)throw new Error("too late; already running");return e}function an(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function sn(t,n){var e,r,o,i=t.__transition,a=!0;if(i){for(o in n=null==n?null:n+"",i)(e=i[o]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete i[o]):a=!1;a&&delete t.__transition}}function ln(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var cn,un=180/Math.PI,hn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fn(t,n,e,r,o,i){var a,s,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,l/=s),t*r<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(n,t)*un,skewX:Math.atan(l)*un,scaleX:a,scaleY:s}}function pn(t,n,e,r){function o(t){return t.length?t.pop()+" ":""}return function(i,a){var s=[],l=[];return i=t(i),a=t(a),function(t,r,o,i,a,s){if(t!==o||r!==i){var l=a.push("translate(",null,n,null,e);s.push({i:l-4,x:ln(t,o)},{i:l-2,x:ln(r,i)})}else(o||i)&&a.push("translate("+o+n+i+e)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(t,n,e,i){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),i.push({i:e.push(o(e)+"rotate(",null,r)-2,x:ln(t,n)})):n&&e.push(o(e)+"rotate("+n+r)}(i.rotate,a.rotate,s,l),function(t,n,e,i){t!==n?i.push({i:e.push(o(e)+"skewX(",null,r)-2,x:ln(t,n)}):n&&e.push(o(e)+"skewX("+n+r)}(i.skewX,a.skewX,s,l),function(t,n,e,r,i,a){if(t!==e||n!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:ln(t,e)},{i:s-2,x:ln(n,r)})}else 1===e&&1===r||i.push(o(i)+"scale("+e+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(t){for(var n,e=-1,r=l.length;++e<r;)s[(n=l[e]).i]=n.x(t);return s.join("")}}}var dn=pn((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?hn:fn(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),An=pn((function(t){return null==t?hn:(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),(t=cn.transform.baseVal.consolidate())?fn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):hn)}),", ",")",")");function gn(t,n){var e,r;return function(){var o=on(this,t),i=o.tween;if(i!==e)for(var a=0,s=(r=e=i).length;a<s;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}o.tween=r}}function mn(t,n,e){var r,o;if("function"!=typeof e)throw new Error;return function(){var i=on(this,t),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:n,value:e},l=0,c=o.length;l<c;++l)if(o[l].name===n){o[l]=s;break}l===c&&o.push(s)}i.tween=o}}function vn(t,n,e){var r=t._id;return t.each((function(){var t=on(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return an(t,r).value[n]}}function yn(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function bn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function _n(){}var wn=.7,Cn=1/wn,En="\\s*([+-]?\\d+)\\s*",xn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kn=/^#([0-9a-f]{3,8})$/,Sn=new RegExp("^rgb\\("+[En,En,En]+"\\)$"),zn=new RegExp("^rgb\\("+[Bn,Bn,Bn]+"\\)$"),Mn=new RegExp("^rgba\\("+[En,En,En,xn]+"\\)$"),In=new RegExp("^rgba\\("+[Bn,Bn,Bn,xn]+"\\)$"),Tn=new RegExp("^hsl\\("+[xn,Bn,Bn]+"\\)$"),Nn=new RegExp("^hsla\\("+[xn,Bn,Bn,xn]+"\\)$"),Ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rn(){return this.rgb().formatHex()}function qn(){return this.rgb().formatRgb()}function On(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=kn.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Dn(n):3===e?new jn(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Pn(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Pn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Sn.exec(t))?new jn(n[1],n[2],n[3],1):(n=zn.exec(t))?new jn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Mn.exec(t))?Pn(n[1],n[2],n[3],n[4]):(n=In.exec(t))?Pn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Tn.exec(t))?Yn(n[1],n[2]/100,n[3]/100,1):(n=Nn.exec(t))?Yn(n[1],n[2]/100,n[3]/100,n[4]):Ln.hasOwnProperty(t)?Dn(Ln[t]):"transparent"===t?new jn(NaN,NaN,NaN,0):null}function Dn(t){return new jn(t>>16&255,t>>8&255,255&t,1)}function Pn(t,n,e,r){return r<=0&&(t=n=e=NaN),new jn(t,n,e,r)}function Fn(t,n,e,r){return 1===arguments.length?((o=t)instanceof _n||(o=On(o)),o?new jn((o=o.rgb()).r,o.g,o.b,o.opacity):new jn):new jn(t,n,e,null==r?1:r);var o}function jn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Vn(){return"#"+Un(this.r)+Un(this.g)+Un(this.b)}function Hn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Un(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Yn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Wn(t,n,e,r)}function Gn(t){if(t instanceof Wn)return new Wn(t.h,t.s,t.l,t.opacity);if(t instanceof _n||(t=On(t)),!t)return new Wn;if(t instanceof Wn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,o=Math.min(n,e,r),i=Math.max(n,e,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=n===i?(e-r)/s+6*(e<r):e===i?(r-n)/s+2:(n-e)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new Wn(a,s,l,t.opacity)}function Wn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Xn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Qn(t,n,e,r,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*n+(4-6*i+3*a)*e+(1+3*t+3*i-3*a)*r+a*o)/6}yn(_n,On,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Rn,formatHex:Rn,formatHsl:function(){return Gn(this).formatHsl()},formatRgb:qn,toString:qn}),yn(jn,Fn,bn(_n,{brighter:function(t){return t=null==t?Cn:Math.pow(Cn,t),new jn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?wn:Math.pow(wn,t),new jn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vn,formatHex:Vn,formatRgb:Hn,toString:Hn})),yn(Wn,(function(t,n,e,r){return 1===arguments.length?Gn(t):new Wn(t,n,e,null==r?1:r)}),bn(_n,{brighter:function(t){return t=null==t?Cn:Math.pow(Cn,t),new Wn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?wn:Math.pow(wn,t),new Wn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,o=2*e-r;return new jn(Xn(t>=240?t-240:t+120,o,r),Xn(t,o,r),Xn(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Zn=t=>()=>t;function Jn(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):Zn(isNaN(t)?n:t)}const Kn=function t(n){var e=function(t){return 1===(t=+t)?Jn:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Zn(isNaN(n)?e:n)}}(n);function r(t,n){var r=e((t=Fn(t)).r,(n=Fn(n)).r),o=e(t.g,n.g),i=e(t.b,n.b),a=Jn(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=o(n),t.b=i(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function $n(t){return function(n){var e,r,o=n.length,i=new Array(o),a=new Array(o),s=new Array(o);for(e=0;e<o;++e)r=Fn(n[e]),i[e]=r.r||0,a[e]=r.g||0,s[e]=r.b||0;return i=t(i),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=i(t),r.g=a(t),r.b=s(t),r+""}}}$n((function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),o=t[r],i=t[r+1],a=r>0?t[r-1]:2*o-i,s=r<n-1?t[r+2]:2*i-o;return Qn((e-r/n)*n,a,o,i,s)}})),$n((function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),o=t[(r+n-1)%n],i=t[r%n],a=t[(r+1)%n],s=t[(r+2)%n];return Qn((e-r/n)*n,o,i,a,s)}}));var te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp(te.source,"g");function ee(t,n){var e,r,o,i=te.lastIndex=ne.lastIndex=0,a=-1,s=[],l=[];for(t+="",n+="";(e=te.exec(t))&&(r=ne.exec(n));)(o=r.index)>i&&(o=n.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(e=e[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ln(e,r)})),i=ne.lastIndex;return i<n.length&&(o=n.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)s[(e=l[r]).i]=e.x(t);return s.join("")})}function re(t,n){var e;return("number"==typeof n?ln:n instanceof On?Kn:(e=On(n))?(n=e,Kn):ee)(t,n)}function oe(t){return function(){this.removeAttribute(t)}}function ie(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ae(t,n,e){var r,o,i=e+"";return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function se(t,n,e){var r,o,i=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function le(t,n,e){var r,o,i;return function(){var a,s,l=e(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=n(r=a,l));this.removeAttribute(t)}}function ce(t,n,e){var r,o,i;return function(){var a,s,l=e(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=n(r=a,l));this.removeAttributeNS(t.space,t.local)}}function ue(t,n){var e,r;function o(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}(t,o)),e}return o._value=n,o}function he(t,n){var e,r;function o(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&function(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}(t,o)),e}return o._value=n,o}function fe(t,n){return function(){rn(this,t).delay=+n.apply(this,arguments)}}function pe(t,n){return n=+n,function(){rn(this,t).delay=n}}function de(t,n){return function(){on(this,t).duration=+n.apply(this,arguments)}}function Ae(t,n){return n=+n,function(){on(this,t).duration=n}}var ge=zt.prototype.constructor;function me(t){return function(){this.style.removeProperty(t)}}var ve=0;function ye(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function be(){return++ve}var _e=zt.prototype;ye.prototype=function(t){return zt().transition(t)}.prototype={constructor:ye,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=y(t));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,l,c=r[a],u=c.length,h=i[a]=new Array(u),f=0;f<u;++f)(s=c[f])&&(l=t.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,en(h[f],n,e,f,h,an(s,e)));return new ye(i,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=w(t));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var f,p=t.call(l,l.__data__,h,c),d=an(l,e),A=0,g=p.length;A<g;++A)(f=p[A])&&en(f,n,e,A,p,d);i.push(p),a.push(l)}return new ye(i,a,n,e)},filter:function(t){"function"!=typeof t&&(t=C(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,a=n[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new ye(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,o=e.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=n[s],u=e[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(f[p]=l);for(;s<r;++s)a[s]=n[s];return new ye(a,this._parents,this._name,this._id)},selection:function(){return new ge(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=be(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=an(a,n);en(a,t,e,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ye(r,this._parents,t,e)},call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:function(t,n){var e=this._id;return arguments.length<2?an(this.node(),e).on.on(t):this.each(function(t,n,e){var r,o,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?rn:on;return function(){var a=i(this,t),s=a.on;s!==r&&(o=(r=s).copy()).on(n,e),a.on=o}}(e,t,n))},attr:function(t,n){var e=O(t),r="transform"===e?An:re;return this.attrTween(t,"function"==typeof n?(e.local?ce:le)(e,r,vn(this,"attr."+t,n)):null==n?(e.local?ie:oe)(e):(e.local?se:ae)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=O(t);return this.tween(e,(r.local?ue:he)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?dn:re;return null==n?this.styleTween(t,function(t,n){var e,r,o;return function(){var i=X(this,t),a=(this.style.removeProperty(t),X(this,t));return i===a?null:i===e&&a===r?o:o=n(e=i,r=a)}}(t,r)).on("end.style."+t,me(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,o,i;return function(){var a=X(this,t),s=e(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=X(this,t)),a===l?null:a===r&&l===o?i:(o=l,i=n(r=a,s))}}(t,r,vn(this,"style."+t,n))).each(function(t,n){var e,r,o,i,a="style."+n,s="end."+a;return function(){var l=on(this,t),c=l.on,u=null==l.value[a]?i||(i=me(n)):void 0;c===e&&o===u||(r=(e=c).copy()).on(s,o=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,o,i=e+"";return function(){var a=X(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,o;function i(){var i=n.apply(this,arguments);return i!==o&&(r=(o=i)&&function(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}(t,i,e)),r}return i._value=n,i}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(vn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&function(t){return function(n){this.textContent=t.call(this,n)}}(r)),n}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,o=an(this.node(),e).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===t)return r.value;return null}return this.each((null==n?gn:mn)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?fe:pe)(n,t)):an(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?de:Ae)(n,t)):an(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){on(this,t).ease=n}}(n,t)):an(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;on(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,o=e.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0===--o&&i()}};e.each((function(){var e=on(this,r),o=e.on;o!==t&&((n=(t=o).copy())._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),e.on=n})),0===o&&i()}))},[Symbol.iterator]:_e[Symbol.iterator]};var we={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ce(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}zt.prototype.interrupt=function(t){return this.each((function(){sn(this,t)}))},zt.prototype.transition=function(t){var n,e;t instanceof ye?(n=t._id,t=t._name):(n=be(),(e=we).time=Gt(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)(a=s[c])&&en(a,t,n,c,s,e||Ce(a,n));return new ye(r,this._parents,t,n)};const{abs:Ee,max:xe,min:Be}=Math;function ke(t){return{type:t}}function Se(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function ze(t,n){return fetch(t,n).then(Se)}["w","e"].map(ke),["n","s"].map(ke),["n","w","e","s","nw","ne","sw","se"].map(ke);const Me=t=>t;function Ie(t,n){t&&Ne.hasOwnProperty(t.type)&&Ne[t.type](t,n)}var Te={Feature:function(t,n){Ie(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,o=e.length;++r<o;)Ie(e[r].geometry,n)}},Ne={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Le(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)Le(e[r],n,0)},Polygon:function(t,n){Re(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)Re(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,o=e.length;++r<o;)Ie(e[r],n)}};function Le(t,n,e){var r,o=-1,i=t.length-e;for(n.lineStart();++o<i;)r=t[o],n.point(r[0],r[1],r[2]);n.lineEnd()}function Re(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Le(t[e],n,1);n.polygonEnd()}function qe(t,n){t&&Te.hasOwnProperty(t.type)?Te[t.type](t,n):Ie(t,n)}class Oe{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],i=t+o,a=Math.abs(t)<Math.abs(o)?t-(i-o):o-(i-t);a&&(n[e++]=a),t=i}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,o=this._n,i=0;if(o>0){for(i=t[--o];o>0&&(n=i,e=t[--o],i=n+e,r=e-(i-n),!r););o>0&&(r<0&&t[o-1]<0||r>0&&t[o-1]>0)&&(e=2*r,n=i+e,e==n-i&&(i=n))}return i}}var De=1e-6,Pe=Math.PI,Fe=Pe/2,je=Pe/4,Ve=2*Pe,He=180/Pe,Ue=Pe/180,Ye=Math.abs,Ge=Math.atan,We=Math.atan2,Xe=Math.cos,Qe=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),Ze=Math.sign||function(t){return t>0?1:t<0?-1:0},Je=Math.sqrt;function Ke(t){return t>1?Fe:t<-1?-Fe:Math.asin(t)}function $e(){}Math.tan;var tr,nr,er,rr,or=new Oe,ir=new Oe,ar={point:$e,lineStart:$e,lineEnd:$e,polygonStart:function(){ar.lineStart=sr,ar.lineEnd=ur},polygonEnd:function(){ar.lineStart=ar.lineEnd=ar.point=$e,or.add(Ye(ir)),ir=new Oe},result:function(){var t=or/2;return or=new Oe,t}};function sr(){ar.point=lr}function lr(t,n){ar.point=cr,tr=er=t,nr=rr=n}function cr(t,n){ir.add(rr*t-er*n),er=t,rr=n}function ur(){cr(tr,nr)}const hr=ar;var fr=1/0,pr=fr,dr=-fr,Ar=dr,gr={point:function(t,n){t<fr&&(fr=t),t>dr&&(dr=t),n<pr&&(pr=n),n>Ar&&(Ar=n)},lineStart:$e,lineEnd:$e,polygonStart:$e,polygonEnd:$e,result:function(){var t=[[fr,pr],[dr,Ar]];return dr=Ar=-(pr=fr=1/0),t}};const mr=gr;var vr,yr,br,_r,wr=0,Cr=0,Er=0,xr=0,Br=0,kr=0,Sr=0,zr=0,Mr=0,Ir={point:Tr,lineStart:Nr,lineEnd:qr,polygonStart:function(){Ir.lineStart=Or,Ir.lineEnd=Dr},polygonEnd:function(){Ir.point=Tr,Ir.lineStart=Nr,Ir.lineEnd=qr},result:function(){var t=Mr?[Sr/Mr,zr/Mr]:kr?[xr/kr,Br/kr]:Er?[wr/Er,Cr/Er]:[NaN,NaN];return wr=Cr=Er=xr=Br=kr=Sr=zr=Mr=0,t}};function Tr(t,n){wr+=t,Cr+=n,++Er}function Nr(){Ir.point=Lr}function Lr(t,n){Ir.point=Rr,Tr(br=t,_r=n)}function Rr(t,n){var e=t-br,r=n-_r,o=Je(e*e+r*r);xr+=o*(br+t)/2,Br+=o*(_r+n)/2,kr+=o,Tr(br=t,_r=n)}function qr(){Ir.point=Tr}function Or(){Ir.point=Pr}function Dr(){Fr(vr,yr)}function Pr(t,n){Ir.point=Fr,Tr(vr=br=t,yr=_r=n)}function Fr(t,n){var e=t-br,r=n-_r,o=Je(e*e+r*r);xr+=o*(br+t)/2,Br+=o*(_r+n)/2,kr+=o,Sr+=(o=_r*t-br*n)*(br+t),zr+=o*(_r+n),Mr+=3*o,Tr(br=t,_r=n)}const jr=Ir;function Vr(t){this._context=t}Vr.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Ve)}},result:$e};var Hr,Ur,Yr,Gr,Wr,Xr=new Oe,Qr={point:$e,lineStart:function(){Qr.point=Zr},lineEnd:function(){Hr&&Jr(Ur,Yr),Qr.point=$e},polygonStart:function(){Hr=!0},polygonEnd:function(){Hr=null},result:function(){var t=+Xr;return Xr=new Oe,t}};function Zr(t,n){Qr.point=Jr,Ur=Gr=t,Yr=Wr=n}function Jr(t,n){Gr-=t,Wr-=n,Xr.add(Je(Gr*Gr+Wr*Wr)),Gr=t,Wr=n}const Kr=Qr;function $r(){this._string=[]}function to(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function no(t,n){var e,r,o=4.5;function i(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),qe(t,e(r))),r.result()}return i.area=function(t){return qe(t,e(hr)),hr.result()},i.measure=function(t){return qe(t,e(Kr)),Kr.result()},i.bounds=function(t){return qe(t,e(mr)),mr.result()},i.centroid=function(t){return qe(t,e(jr)),jr.result()},i.projection=function(n){return arguments.length?(e=null==n?(t=null,Me):(t=n).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(n=null,new $r):new Vr(n=t),"function"!=typeof o&&r.pointRadius(o),i):n},i.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),i):o},i.projection(t).context(n)}function eo(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:$e,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function ro(t,n){return Ye(t[0]-n[0])<De&&Ye(t[1]-n[1])<De}function oo(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function io(t,n,e,r,o){var i,a,s=[],l=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(ro(r,a)){if(!r[2]&&!a[2]){for(o.lineStart(),i=0;i<n;++i)o.point((r=t[i])[0],r[1]);return void o.lineEnd()}a[0]+=2e-6}s.push(e=new oo(r,t,null,!0)),l.push(e.o=new oo(r,null,e,!1)),s.push(e=new oo(a,t,null,!1)),l.push(e.o=new oo(a,null,e,!0))}})),s.length){for(l.sort(n),ao(s),ao(l),i=0,a=l.length;i<a;++i)l[i].e=e=!e;for(var c,u,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(i=0,a=c.length;i<a;++i)o.point((u=c[i])[0],u[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(p)for(c=f.p.z,i=c.length-1;i>=0;--i)o.point((u=c[i])[0],u[1]);else r(f.x,f.p.x,-1,o);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);o.lineEnd()}}}function ao(t){if(n=t.length){for(var n,e,r=0,o=t[0];++r<n;)o.n=e=t[r],e.p=o,o=e;o.n=e=t[0],e.p=o}}function so(t){return[We(t[1],t[0]),Ke(t[2])]}function lo(t){var n=t[0],e=t[1],r=Xe(e);return[r*Xe(n),r*Qe(n),Qe(e)]}function co(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function uo(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ho(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function fo(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function po(t){var n=Je(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Ao(t){return Ye(t[0])<=Pe?t[0]:Ze(t[0])*((Ye(t[0])+Pe)%Ve-Pe)}function go(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function mo(t,n,e,r){return function(o){var i,a,s,l=n(o),c=eo(),u=n(c),h=!1,f={point:p,lineStart:A,lineEnd:g,polygonStart:function(){f.point=m,f.lineStart=v,f.lineEnd=y,a=[],i=[]},polygonEnd:function(){f.point=p,f.lineStart=A,f.lineEnd=g,a=go(a);var t=function(t,n){var e=Ao(n),r=n[1],o=Qe(r),i=[Qe(e),-Xe(e),0],a=0,s=0,l=new Oe;1===o?r=Fe+De:-1===o&&(r=-Fe-De);for(var c=0,u=t.length;c<u;++c)if(f=(h=t[c]).length)for(var h,f,p=h[f-1],d=Ao(p),A=p[1]/2+je,g=Qe(A),m=Xe(A),v=0;v<f;++v,d=b,g=w,m=C,p=y){var y=h[v],b=Ao(y),_=y[1]/2+je,w=Qe(_),C=Xe(_),E=b-d,x=E>=0?1:-1,B=x*E,k=B>Pe,S=g*w;if(l.add(We(S*x*Qe(B),m*C+S*Xe(B))),a+=k?E+x*Ve:E,k^d>=e^b>=e){var z=uo(lo(p),lo(y));po(z);var M=uo(i,z);po(M);var I=(k^E>=0?-1:1)*Ke(M[2]);(r>I||r===I&&(z[0]||z[1]))&&(s+=k^E>=0?1:-1)}}return(a<-De||a<De&&l<-1e-12)^1&s}(i,r);a.length?(h||(o.polygonStart(),h=!0),io(a,yo,t,e,o)):t&&(h||(o.polygonStart(),h=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),a=i=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(n,e){t(n,e)&&o.point(n,e)}function d(t,n){l.point(t,n)}function A(){f.point=d,l.lineStart()}function g(){f.point=p,l.lineEnd()}function m(t,n){s.push([t,n]),u.point(t,n)}function v(){u.lineStart(),s=[]}function y(){m(s[0][0],s[0][1]),u.lineEnd();var t,n,e,r,l=u.clean(),f=c.result(),p=f.length;if(s.pop(),i.push(s),s=null,p)if(1&l){if((n=(e=f[0]).length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),t=0;t<n;++t)o.point((r=e[t])[0],r[1]);o.lineEnd()}}else p>1&&2&l&&f.push(f.pop().concat(f.shift())),a.push(f.filter(vo))}return f}}function vo(t){return t.length>1}function yo(t,n){return((t=t.x)[0]<0?t[1]-Fe-De:Fe-t[1])-((n=n.x)[0]<0?n[1]-Fe-De:Fe-n[1])}$r.prototype={_radius:4.5,_circle:to(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=to(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const bo=mo((function(){return!0}),(function(t){var n,e=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(i,a){var s=i>0?Pe:-Pe,l=Ye(i-e);Ye(l-Pe)<De?(t.point(e,r=(r+a)/2>0?Fe:-Fe),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(i,r),n=0):o!==s&&l>=Pe&&(Ye(e-o)<De&&(e-=o*De),Ye(i-s)<De&&(i-=s*De),r=function(t,n,e,r){var o,i,a=Qe(t-e);return Ye(a)>De?Ge((Qe(n)*(i=Xe(r))*Qe(e)-Qe(r)*(o=Xe(n))*Qe(t))/(o*i*a)):(n+r)/2}(e,r,i,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(s,r),n=0),t.point(e=i,r=a),o=s},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var o;if(null==t)o=e*Fe,r.point(-Pe,o),r.point(0,o),r.point(Pe,o),r.point(Pe,0),r.point(Pe,-o),r.point(0,-o),r.point(-Pe,-o),r.point(-Pe,0),r.point(-Pe,o);else if(Ye(t[0]-n[0])>De){var i=t[0]<n[0]?Pe:-Pe;o=e*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(n[0],n[1])}),[-Pe,-Fe]);function _o(t,n){(n=lo(n))[0]-=t,po(n);var e,r=(e=-n[1])>1?0:e<-1?Pe:Math.acos(e);return((-n[2]<0?-r:r)+Ve-De)%Ve}var wo=1e9,Co=-wo;function Eo(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function xo(t,n){return[Ye(t)>Pe?t+Math.round(-t/Ve)*Ve:t,n]}function Bo(t){return function(n,e){return[(n+=t)>Pe?n-Ve:n<-Pe?n+Ve:n,e]}}function ko(t){var n=Bo(t);return n.invert=Bo(-t),n}function So(t,n){var e=Xe(t),r=Qe(t),o=Xe(n),i=Qe(n);function a(t,n){var a=Xe(n),s=Xe(t)*a,l=Qe(t)*a,c=Qe(n),u=c*e+s*r;return[We(l*o-u*i,s*e-c*r),Ke(u*o+l*i)]}return a.invert=function(t,n){var a=Xe(n),s=Xe(t)*a,l=Qe(t)*a,c=Qe(n),u=c*o-l*i;return[We(l*o+c*i,s*e+u*r),Ke(u*e-s*r)]},a}function zo(t){return function(n){var e=new Mo;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Mo(){}function Io(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),qe(e,t.stream(mr)),n(mr.result()),null!=r&&t.clipExtent(r),t}function To(t,n,e){return Io(t,(function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],i=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),a=+n[0][0]+(r-i*(e[1][0]+e[0][0]))/2,s=+n[0][1]+(o-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([a,s])}),e)}xo.invert=xo,Mo.prototype={constructor:Mo,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var No=Xe(30*Ue);function Lo(t,n){return+n?function(t,n){function e(r,o,i,a,s,l,c,u,h,f,p,d,A,g){var m=c-r,v=u-o,y=m*m+v*v;if(y>4*n&&A--){var b=a+f,_=s+p,w=l+d,C=Je(b*b+_*_+w*w),E=Ke(w/=C),x=Ye(Ye(w)-1)<De||Ye(i-h)<De?(i+h)/2:We(_,b),B=t(x,E),k=B[0],S=B[1],z=k-r,M=S-o,I=v*z-m*M;(I*I/y>n||Ye((m*z+v*M)/y-.5)>.3||a*f+s*p+l*d<No)&&(e(r,o,i,a,s,l,k,S,x,b/=C,_/=C,w,A,g),g.point(k,S),e(k,S,x,b,_,w,c,u,h,f,p,d,A,g))}}return function(n){var r,o,i,a,s,l,c,u,h,f,p,d,A={point:g,lineStart:m,lineEnd:y,polygonStart:function(){n.polygonStart(),A.lineStart=b},polygonEnd:function(){n.polygonEnd(),A.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){u=NaN,A.point=v,n.lineStart()}function v(r,o){var i=lo([r,o]),a=t(r,o);e(u,h,c,f,p,d,u=a[0],h=a[1],c=r,f=i[0],p=i[1],d=i[2],16,n),n.point(u,h)}function y(){A.point=g,n.lineEnd()}function b(){m(),A.point=_,A.lineEnd=w}function _(t,n){v(r=t,n),o=u,i=h,a=f,s=p,l=d,A.point=v}function w(){e(u,h,c,f,p,d,o,i,r,a,s,l,16,n),A.lineEnd=y,y()}return A}}(t,n):function(t){return zo({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Ro=zo({point:function(t,n){this.stream.point(t*Ue,n*Ue)}});function qo(t,n,e,r,o,i){if(!i)return function(t,n,e,r,o){function i(i,a){return[n+t*(i*=r),e-t*(a*=o)]}return i.invert=function(i,a){return[(i-n)/t*r,(e-a)/t*o]},i}(t,n,e,r,o);var a=Xe(i),s=Qe(i),l=a*t,c=s*t,u=a/t,h=s/t,f=(s*e-a*n)/t,p=(s*n+a*e)/t;function d(t,i){return[l*(t*=r)-c*(i*=o)+n,e-c*t-l*i]}return d.invert=function(t,n){return[r*(u*t-h*n+f),o*(p-h*t-u*n)]},d}function Oo(t){return function(t){var n,e,r,o,i,a,s,l,c,u,h=150,f=480,p=250,d=0,A=0,g=0,m=0,v=0,y=0,b=1,_=1,w=null,C=bo,E=null,x=Me,B=.5;function k(t){return l(t[0]*Ue,t[1]*Ue)}function S(t){return(t=l.invert(t[0],t[1]))&&[t[0]*He,t[1]*He]}function z(){var t=qo(h,0,0,b,_,y).apply(null,n(d,A)),r=qo(h,f-t[0],p-t[1],b,_,y);return e=function(t,n,e){return(t%=Ve)?n||e?Eo(ko(t),So(n,e)):ko(t):n||e?So(n,e):xo}(g,m,v),s=Eo(n,r),l=Eo(e,s),a=Lo(s,B),M()}function M(){return c=u=null,k}return k.stream=function(t){return c&&u===t?c:c=Ro(function(t){return zo({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(C(a(x(u=t)))))},k.preclip=function(t){return arguments.length?(C=t,w=void 0,M()):C},k.postclip=function(t){return arguments.length?(x=t,E=r=o=i=null,M()):x},k.clipAngle=function(t){return arguments.length?(C=+t?function(t){var n=Xe(t),e=6*Ue,r=n>0,o=Ye(n)>De;function i(t,e){return Xe(t)*Xe(e)>n}function a(t,e,r){var o=[1,0,0],i=uo(lo(t),lo(e)),a=co(i,i),s=i[0],l=a-s*s;if(!l)return!r&&t;var c=n*a/l,u=-n*s/l,h=uo(o,i),f=fo(o,c);ho(f,fo(i,u));var p=h,d=co(f,p),A=co(p,p),g=d*d-A*(co(f,f)-1);if(!(g<0)){var m=Je(g),v=fo(p,(-d-m)/A);if(ho(v,f),v=so(v),!r)return v;var y,b=t[0],_=e[0],w=t[1],C=e[1];_<b&&(y=b,b=_,_=y);var E=_-b,x=Ye(E-Pe)<De;if(!x&&C<w&&(y=w,w=C,C=y),x||E<De?x?w+C>0^v[1]<(Ye(v[0]-b)<De?w:C):w<=v[1]&&v[1]<=C:E>Pe^(b<=v[0]&&v[0]<=_)){var B=fo(p,(-d+m)/A);return ho(B,f),[v,so(B)]}}}function s(n,e){var o=r?t:Pe-t,i=0;return n<-o?i|=1:n>o&&(i|=2),e<-o?i|=4:e>o&&(i|=8),i}return mo(i,(function(t){var n,e,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,f){var p,d=[h,f],A=i(h,f),g=r?A?0:s(h,f):A?s(h+(h<0?Pe:-Pe),f):0;if(!n&&(c=l=A)&&t.lineStart(),A!==l&&(!(p=a(n,d))||ro(n,p)||ro(d,p))&&(d[2]=1),A!==l)u=0,A?(t.lineStart(),p=a(d,n),t.point(p[0],p[1])):(p=a(n,d),t.point(p[0],p[1],2),t.lineEnd()),n=p;else if(o&&n&&r^A){var m;g&e||!(m=a(d,n,!0))||(u=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!A||n&&ro(n,d)||t.point(d[0],d[1]),n=d,l=A,e=g},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return u|(c&&l)<<1}}}),(function(n,r,o,i){!function(t,n,e,r,o,i){if(e){var a=Xe(n),s=Qe(n),l=r*e;null==o?(o=n+r*Ve,i=n-l/2):(o=_o(a,o),i=_o(a,i),(r>0?o<i:o>i)&&(o+=r*Ve));for(var c,u=o;r>0?u>i:u<i;u-=l)c=so([a,-s*Xe(u),-s*Qe(u)]),t.point(c[0],c[1])}}(i,t,e,o,n,r)}),r?[0,-t]:[-Pe,t-Pe])}(w=t*Ue):(w=null,bo),M()):w*He},k.clipExtent=function(t){return arguments.length?(x=null==t?(E=r=o=i=null,Me):function(t,n,e,r){function o(o,i){return t<=o&&o<=e&&n<=i&&i<=r}function i(o,i,s,c){var u=0,h=0;if(null==o||(u=a(o,s))!==(h=a(i,s))||l(o,i)<0^s>0)do{c.point(0===u||3===u?t:e,u>1?r:n)}while((u=(u+s+4)%4)!==h);else c.point(i[0],i[1])}function a(r,o){return Ye(r[0]-t)<De?o>0?0:3:Ye(r[0]-e)<De?o>0?2:1:Ye(r[1]-n)<De?o>0?1:0:o>0?3:2}function s(t,n){return l(t.x,n.x)}function l(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var l,c,u,h,f,p,d,A,g,m,v,y=a,b=eo(),_={point:w,lineStart:function(){_.point=C,c&&c.push(u=[]),m=!0,g=!1,d=A=NaN},lineEnd:function(){l&&(C(h,f),p&&g&&b.rejoin(),l.push(b.result())),_.point=w,g&&y.lineEnd()},polygonStart:function(){y=b,l=[],c=[],v=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,o=c.length;e<o;++e)for(var i,a,s=c[e],l=1,u=s.length,h=s[0],f=h[0],p=h[1];l<u;++l)i=f,a=p,f=(h=s[l])[0],p=h[1],a<=r?p>r&&(f-i)*(r-a)>(p-a)*(t-i)&&++n:p<=r&&(f-i)*(r-a)<(p-a)*(t-i)&&--n;return n}(),e=v&&n,o=(l=go(l)).length;(e||o)&&(a.polygonStart(),e&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),o&&io(l,s,n,i,a),a.polygonEnd()),y=a,l=c=u=null}};function w(t,n){o(t,n)&&y.point(t,n)}function C(i,a){var s=o(i,a);if(c&&u.push([i,a]),m)h=i,f=a,p=s,m=!1,s&&(y.lineStart(),y.point(i,a));else if(s&&g)y.point(i,a);else{var l=[d=Math.max(Co,Math.min(wo,d)),A=Math.max(Co,Math.min(wo,A))],b=[i=Math.max(Co,Math.min(wo,i)),a=Math.max(Co,Math.min(wo,a))];!function(t,n,e,r,o,i){var a,s=t[0],l=t[1],c=0,u=1,h=n[0]-s,f=n[1]-l;if(a=e-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=i-l,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*h,t[1]=l+c*f),u<1&&(n[0]=s+u*h,n[1]=l+u*f),!0}}}}}(l,b,t,n,e,r)?s&&(y.lineStart(),y.point(i,a),v=!1):(g||(y.lineStart(),y.point(l[0],l[1])),y.point(b[0],b[1]),s||y.lineEnd(),v=!1)}d=i,A=a,g=s}return _}}(E=+t[0][0],r=+t[0][1],o=+t[1][0],i=+t[1][1]),M()):null==E?null:[[E,r],[o,i]]},k.scale=function(t){return arguments.length?(h=+t,z()):h},k.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],z()):[f,p]},k.center=function(t){return arguments.length?(d=t[0]%360*Ue,A=t[1]%360*Ue,z()):[d*He,A*He]},k.rotate=function(t){return arguments.length?(g=t[0]%360*Ue,m=t[1]%360*Ue,v=t.length>2?t[2]%360*Ue:0,z()):[g*He,m*He,v*He]},k.angle=function(t){return arguments.length?(y=t%360*Ue,z()):y*He},k.reflectX=function(t){return arguments.length?(b=t?-1:1,z()):b<0},k.reflectY=function(t){return arguments.length?(_=t?-1:1,z()):_<0},k.precision=function(t){return arguments.length?(a=Lo(s,B=t*t),M()):Je(B)},k.fitExtent=function(t,n){return To(k,t,n)},k.fitSize=function(t,n){return function(t,n,e){return To(t,[[0,0],n],e)}(k,t,n)},k.fitWidth=function(t,n){return function(t,n,e){return Io(t,(function(e){var r=+n,o=r/(e[1][0]-e[0][0]),i=(r-o*(e[1][0]+e[0][0]))/2,a=-o*e[0][1];t.scale(150*o).translate([i,a])}),e)}(k,t,n)},k.fitHeight=function(t,n){return function(t,n,e){return Io(t,(function(e){var r=+n,o=r/(e[1][1]-e[0][1]),i=-o*e[0][0],a=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([i,a])}),e)}(k,t,n)},function(){return n=t.apply(this,arguments),k.invert=n.invert&&S,z()}}((function(){return t}))()}function Do(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function Po(){return Oo(Do).scale(175.295)}function Fo(t){return"string"==typeof t?new kt([[document.querySelector(t)]],[document.documentElement]):new kt([[t]],Bt)}function jo(t){t.preventDefault(),t.stopImmediatePropagation()}function Vo(t){return((t=Math.exp(t))+1/t)/2}Do.invert=function(t,n){var e,r=n,o=25;do{var i=r*r,a=i*i;r-=e=(r*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-n)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a)))}while(Ye(e)>De&&--o>0);return[t/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]};const Ho=function t(n,e,r){function o(t,o){var i,a,s=t[0],l=t[1],c=t[2],u=o[0],h=o[1],f=o[2],p=u-s,d=h-l,A=p*p+d*d;if(A<1e-12)a=Math.log(f/c)/n,i=function(t){return[s+t*p,l+t*d,c*Math.exp(n*t*a)]};else{var g=Math.sqrt(A),m=(f*f-c*c+r*A)/(2*c*e*g),v=(f*f-c*c-r*A)/(2*f*e*g),y=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(v*v+1)-v);a=(b-y)/n,i=function(t){var r,o=t*a,i=Vo(y),u=c/(e*g)*(i*(r=n*o+y,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[s+u*p,l+u*d,c*i/Vo(n*o+y)]}}return i.duration=1e3*a*n/Math.SQRT2,i}return o.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},o}(Math.SQRT2,2,4);function Uo(t,n){if(t=function(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[t.clientX-o.left-n.clientLeft,t.clientY-o.top-n.clientTop]}}return[t.pageX,t.pageY]}const Yo=t=>()=>t;function Go(t,{sourceEvent:n,target:e,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Wo(t,n,e){this.k=t,this.x=n,this.y=e}Wo.prototype={constructor:Wo,scale:function(t){return 1===t?this:new Wo(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Wo(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xo,Qo,Zo,Jo,Ko=new Wo(1,0,0);function $o(t){t.stopImmediatePropagation()}function ti(t){t.preventDefault(),t.stopImmediatePropagation()}function ni(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function ei(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ri(){return this.__zoom||Ko}function oi(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ii(){return navigator.maxTouchPoints||"ontouchstart"in this}function ai(t,n,e){var r=t.invertX(n[0][0])-e[0][0],o=t.invertX(n[1][0])-e[1][0],i=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function si(){var t,n,e,r=ni,o=ei,i=ai,a=oi,s=ii,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=Ho,f=Rt("start","zoom","end"),p=0,d=10;function A(t){t.property("__zoom",ri).on("wheel.zoom",w).on("mousedown.zoom",C).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,n){return(n=Math.max(l[0],Math.min(l[1],n)))===t.k?t:new Wo(n,t.x,t.y)}function m(t,n,e){var r=n[0]-e[0]*t.k,o=n[1]-e[1]*t.k;return r===t.x&&o===t.y?t:new Wo(t.k,r,o)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,n,e,r){t.on("start.zoom",(function(){b(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,i=arguments,a=b(t,i).event(r),s=o.apply(t,i),l=null==e?v(s):"function"==typeof e?e.apply(t,i):e,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,f="function"==typeof n?n.apply(t,i):n,p=h(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(t){if(1===t)t=f;else{var n=p(t),e=c/n[2];t=new Wo(e,l[0]-n[0]*e,l[1]-n[1]*e)}a.zoom(null,t)}}))}function b(t,n,e){return!e&&t.__zooming||new _(t,n)}function _(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=o.apply(t,n),this.taps=0}function w(t,...n){if(r.apply(this,arguments)){var e=b(this,n).event(t),o=this.__zoom,s=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,a.apply(this,arguments)))),u=Uo(t);if(e.wheel)e.mouse[0][0]===u[0]&&e.mouse[0][1]===u[1]||(e.mouse[1]=o.invert(e.mouse[0]=u)),clearTimeout(e.wheel);else{if(o.k===s)return;e.mouse=[u,o.invert(u)],sn(this),e.start()}ti(t),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),150),e.zoom("mouse",i(m(g(o,s),e.mouse[0],e.mouse[1]),e.extent,c))}}function C(t,...n){if(!e&&r.apply(this,arguments)){var o=b(this,n,!0).event(t),a=Fo(t.view).on("mousemove.zoom",(function(t){if(ti(t),!o.moved){var n=t.clientX-u,e=t.clientY-h;o.moved=n*n+e*e>p}o.event(t).zoom("mouse",i(m(o.that.__zoom,o.mouse[0]=Uo(t,l),o.mouse[1]),o.extent,c))}),!0).on("mouseup.zoom",(function(t){a.on("mousemove.zoom mouseup.zoom",null),function(t,n){var e=t.document.documentElement,r=Fo(t).on("dragstart.drag",null);n&&(r.on("click.drag",jo,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}(t.view,o.moved),ti(t),o.event(t).end()}),!0),s=Uo(t,l),l=t.currentTarget,u=t.clientX,h=t.clientY;!function(t){var n=t.document.documentElement,e=Fo(t).on("dragstart.drag",jo,!0);"onselectstart"in n?e.on("selectstart.drag",jo,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}(t.view),$o(t),o.mouse=[s,this.__zoom.invert(s)],sn(this),o.start()}}function E(t,...n){if(r.apply(this,arguments)){var e=this.__zoom,a=Uo(t.changedTouches?t.changedTouches[0]:t,this),s=e.invert(a),l=e.k*(t.shiftKey?.5:2),h=i(m(g(e,l),a,s),o.apply(this,n),c);ti(t),u>0?Fo(this).transition().duration(u).call(y,h,a,t):Fo(this).call(A.transform,h,a,t)}}function x(e,...o){if(r.apply(this,arguments)){var i,a,s,l,c=e.touches,u=c.length,h=b(this,o,e.changedTouches.length===u).event(e);for($o(e),a=0;a<u;++a)l=[l=Uo(s=c[a],this),this.__zoom.invert(l),s.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,i=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),i&&(h.taps<2&&(n=l[0],t=setTimeout((function(){t=null}),500)),sn(this),h.start())}}function B(t,...n){if(this.__zooming){var e,r,o,a,s=b(this,n).event(t),l=t.changedTouches,u=l.length;for(ti(t),e=0;e<u;++e)o=Uo(r=l[e],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=o:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=o);if(r=s.that.__zoom,s.touch1){var h=s.touch0[0],f=s.touch0[1],p=s.touch1[0],d=s.touch1[1],A=(A=p[0]-h[0])*A+(A=p[1]-h[1])*A,v=(v=d[0]-f[0])*v+(v=d[1]-f[1])*v;r=g(r,Math.sqrt(A/v)),o=[(h[0]+p[0])/2,(h[1]+p[1])/2],a=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!s.touch0)return;o=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(m(r,o,a),s.extent,c))}}function k(t,...r){if(this.__zooming){var o,i,a=b(this,r).event(t),s=t.changedTouches,l=s.length;for($o(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),o=0;o<l;++o)i=s[o],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Uo(i,this),Math.hypot(n[0]-i[0],n[1]-i[1])<d)){var c=Fo(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return A.transform=function(t,n,e,r){var o=t.selection?t.selection():t;o.property("__zoom",ri),t!==o?y(t,n,e,r):o.interrupt().each((function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},A.scaleBy=function(t,n,e,r){A.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,r)},A.scaleTo=function(t,n,e,r){A.transform(t,(function(){var t=o.apply(this,arguments),r=this.__zoom,a=null==e?v(t):"function"==typeof e?e.apply(this,arguments):e,s=r.invert(a),l="function"==typeof n?n.apply(this,arguments):n;return i(m(g(r,l),a,s),t,c)}),e,r)},A.translateBy=function(t,n,e,r){A.transform(t,(function(){return i(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),o.apply(this,arguments),c)}),null,r)},A.translateTo=function(t,n,e,r,a){A.transform(t,(function(){var t=o.apply(this,arguments),a=this.__zoom,s=null==r?v(t):"function"==typeof r?r.apply(this,arguments):r;return i(Ko.translate(s[0],s[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,c)}),r,a)},_.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=Fo(this.that).datum();f.call(t,this.that,new Go(t,{sourceEvent:this.sourceEvent,target:A,type:t,transform:this.that.__zoom,dispatch:f}),n)}},A.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Yo(+t),A):a},A.filter=function(t){return arguments.length?(r="function"==typeof t?t:Yo(!!t),A):r},A.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Yo(!!t),A):s},A.extent=function(t){return arguments.length?(o="function"==typeof t?t:Yo([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),A):o},A.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],A):[l[0],l[1]]},A.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],A):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},A.constrain=function(t){return arguments.length?(i=t,A):i},A.duration=function(t){return arguments.length?(u=+t,A):u},A.interpolate=function(t){return arguments.length?(h=t,A):h},A.on=function(){var t=f.on.apply(f,arguments);return t===f?A:t},A.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,A):Math.sqrt(p)},A.tapDistance=function(t){return arguments.length?(d=+t,A):d},A}function li(t){return t}function ci(t,n){return"string"==typeof n&&(n=t.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map((function(n){return ui(t,n)}))}:ui(t,n)}function ui(t,n){var e=n.id,r=n.bbox,o=null==n.properties?{}:n.properties,i=function(t,n){var e=function(t){if(null==t)return li;var n,e,r=t.scale[0],o=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,s){s||(n=e=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(n+=t[0])*r+i,u[1]=(e+=t[1])*o+a;l<c;)u[l]=t[l],++l;return u}}(t.transform),r=t.arcs;function o(t,n){n.length&&n.pop();for(var o=r[t<0?~t:t],i=0,a=o.length;i<a;++i)n.push(e(o[i],i));t<0&&function(t,n){for(var e,r=t.length,o=r-n;o<--r;)e=t[o],t[o++]=t[r],t[r]=e}(n,a)}function i(t){return e(t)}function a(t){for(var n=[],e=0,r=t.length;e<r;++e)o(t[e],n);return n.length<2&&n.push(n[0]),n}function s(t){for(var n=a(t);n.length<4;)n.push(n[0]);return n}function l(t){return t.map(s)}return function t(n){var e,r=n.type;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(t)};case"Point":e=i(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(i);break;case"LineString":e=a(n.arcs);break;case"MultiLineString":e=n.arcs.map(a);break;case"Polygon":e=l(n.arcs);break;case"MultiPolygon":e=n.arcs.map(l);break;default:return null}return{type:r,coordinates:e}}(n)}(t,n);return null==e&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:e,properties:o,geometry:i}:{type:"Feature",id:e,bbox:r,properties:o,geometry:i}}function hi(t){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hi(t)}function fi(){fi=function(){return n};var t,n={},e=Object.prototype,r=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,n,e,r){Object.defineProperty(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function c(n,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return l(a,"_invoke",function(n,e,r){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=_(s,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var c=u(n,e,r);if("normal"===c.type){if(o=r.done?4:2,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=4,r.method="throw",r.arg=c.arg)}}}(n,r,new E(o||[])),!0),a}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=c;var h={};function f(){}function p(){}function d(){}var A={};l(A,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==e&&r.call(m,i)&&(A=m);var v=d.prototype=f.prototype=Object.create(A);function y(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function e(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==hi(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):n.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(l.arg)}var o;l(this,"_invoke",(function(t,r){function i(){return new n((function(n,o){e(t,r,n,o)}))}return o=o?o.then(i,i):i()}),!0)}function _(n,e){var r=e.method,o=n.i[r];if(o===t)return e.delegate=null,"throw"===r&&n.i.return&&(e.method="return",e.arg=t,_(n,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(o,n.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[n.r]=a.value,e.next=n.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function w(t){this.tryEntries.push(t)}function C(n){var e=n[4]||{};e.type="normal",e.arg=t,n[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(w,this),this.reset(!0)}function x(n){if(null!=n){var e=n[i];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,a=function e(){for(;++o<n.length;)if(r.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(hi(n)+" is not iterable")}return p.prototype=d,l(v,"constructor",d),l(d,"constructor",p),l(d,s,p.displayName="GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},n.awrap=function(t){return{__await:t}},y(b.prototype),l(b.prototype,a,(function(){return this})),n.AsyncIterator=b,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(v),l(v,s,"Generator"),l(v,i,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}},n.values=x,E.prototype={constructor:E,reset:function(n){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!n)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t){a.type="throw",a.arg=n,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,l=i[1],c=i[2];if(-1===i[0])return r("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<l)return this.method="next",this.arg=t,r(l),!0;if(s<c)return r(c),!1}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===t||"continue"===t)&&o[0]<=n&&n<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=n,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[2]===t)return this.complete(e[4],e[3]),C(e),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[0]===t){var r=e[4];if("throw"===r.type){var o=r.arg;C(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(n,e,r){return this.delegate={i:x(n),r:e,n:r},"next"===this.method&&(this.arg=t),h}},n}function pi(t,n,e,r,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void e(t)}s.done?n(l):Promise.resolve(l).then(r,o)}function di(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){pi(i,r,o,a,s,"next",t)}function s(t){pi(i,r,o,a,s,"throw",t)}a(void 0)}))}}Wo.prototype;var Ai,gi,mi,vi=null,yi=null;function bi(t,n,e){if(!n||!e||!e.fields.dimensions||0===e.fields.dimensions.length)return[];var r=e.fields.dimensions[0].name;return n.filter((function(n){return n[r]&&"string"==typeof n[r].value&&n[r].value.toLowerCase()===t.toLowerCase()}))}function _i(t){var n=t.closest(".viz-main-container");if(!n)for(var e=t.parentNode;e&&e!==document.body&&e!==document;){if(e.classList&&e.classList.contains("viz-main-container")){n=e;break}e=e.parentNode}n||(n=t.parentNode||document.body),Fo(n).select(".map-tooltip").remove(),Jo=Fo(n).append("div").attr("class","map-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none")}function wi(t){return Ci.apply(this,arguments)}function Ci(){return Ci=di(fi().mark((function t(n){var e,r,o,i,a,s,l,c,u,h,f,p;return fi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.element,r=n.vizInstance,o=n.data,i=n.config,a=n.queryResponse,console.log("%c[MapRenderer renderMap - OLD LOGIC TEST] Entry","color: green; font-weight: bold;"),s=e.clientWidth,0===(l=e.clientHeight)&&"100%"!==e.style.height&&(e.style.height="100%",l=e.clientHeight),0===s&&"100%"!==e.style.width&&(e.style.width="100%",s=e.clientWidth),!(s<10||l<10)){t.next=11;break}return console.warn("[MapRenderer renderMap] Map container dimensions too small (".concat(s,"x").concat(l,"). Skipping render.")),e.innerHTML="<div style='padding:20px; text-align:center; color:grey;'>Map area too small.</div>",Xo=null,t.abrupt("return");case 11:return e.innerHTML="",Xo=Fo(e).append("svg").attr("width",s).attr("height",l).attr("viewBox","0 0 ".concat(s," ").concat(l)),c=Po().fitSize([s,l],{type:"Sphere"}),mi=no().projection(c),Qo=Xo.append("g"),vi=null,yi=Fo(null),_i(e.parentNode||e),Ai=Ko,gi=si().scaleExtent([1,8]).translateExtent([[2*-s,0],[3*s,l]]).on("zoom",(function(t){Qo&&Qo.attr("transform",t.transform)})),Xo.call(gi),Xo.call(gi.transform,Ai),t.prev=24,t.next=27,ze("https://unpkg.com/world-atlas@2.0.2/countries-50m.json");case 27:return u=t.sent,console.log("[MapRenderer renderMap] GeoJSON data loaded."),h=ci(u,u.objects.countries),Qo.selectAll("g.map-segment").remove(),Qo.selectAll("g.map-segment").data([-1,0,1]).enter().append("g").attr("class","map-segment").attr("transform",(function(t){return"translate(".concat(t*s,", 0)")})).selectAll("path.country").data(h.features).enter().append("path").attr("d",mi).attr("class","country").style("stroke","#ffffff").style("stroke-width",.5),Zo=Qo.selectAll("path.country"),Xo.on("mouseover",(function(t,n){if(yi&&!yi.empty()){var e=yi.datum();e&&e.id!==vi&&yi.style("fill",(function(t){var n=bi(t.properties.name,o,a);return n&&n.length>0?i.map_color_default||"#cccccc":"#EAEAEA"})),Jo&&Jo.style("opacity",0),yi=Fo(null)}})),Zo.on("mouseover",(function(t,n){t.stopPropagation();var e=Fo(this),r=n.id;yi&&!yi.empty()&&yi.datum().id!==r&&yi.datum().id!==vi&&yi.style("fill",(function(t){var n=bi(t.properties.name,o,a);return n&&n.length>0?i.map_color_default||"#cccccc":"#EAEAEA"})),yi=e;var s=bi(n.properties.name,o,a);s&&s.length>0&&(Jo&&Jo.html(n.properties.name).style("opacity",1).style("left",t.pageX+10+"px").style("top",t.pageY-22+"px"),vi!==n.id&&e.style("fill",i.map_color_hover||"#a0a0a0"))})).on("mouseout",(function(t,n){t.stopPropagation();var e=Fo(this);if(vi!==n.id){var r=bi(n.properties.name,o,a);e.style("fill",r&&r.length>0?i.map_color_default||"#cccccc":"#EAEAEA")}Jo&&Jo.style("opacity",0),yi&&yi.node()===this&&(yi=Fo(null))})).on("click",(function(t,n){t.stopPropagation();var e=bi(n.properties.name,o,a);if(!e||0===e.length)return vi&&Xo.selectAll("path.country").filter((function(t){return t.id===vi})).classed("active",!1).style("fill",(function(t){var n=bi(t.properties.name,o,a);return n&&n.length>0?i.map_color_default||"#cccccc":"#EAEAEA"})),vi=null,void r._hideCountrySidebar();vi&&vi!==n.id&&Xo.selectAll("path.country").filter((function(t){return t.id===vi})).classed("active",!1).style("fill",(function(t){var n=bi(t.properties.name,o,a);return n&&n.length>0?i.map_color_default||"#cccccc":"#EAEAEA"})),vi=n.id,Xo.selectAll("path.country").filter((function(t){return t.id===n.id})).classed("active",!0).style("fill",i.map_color_selected||"#e55353"),yi=Xo.selectAll("path.country").filter((function(t){return t.id===n.id})),r._showCountrySidebar(e);var s=mi.bounds(n),l=s[1][0]-s[0][0],c=s[1][1]-s[0][1],u=(s[0][0]+s[1][0])/2,h=(s[0][1]+s[1][1])/2,f=parseFloat(Xo.attr("width")),p=parseFloat(Xo.attr("height"));if(f<1||p<1||0===l||0===c)console.warn("Cannot zoom to bounds: invalid dimensions for map or feature.");else{var d=Math.min(8,Math.max(.5,.9/Math.max(l/f,c/p))),A=f/2-(Fo(this.parentNode).datum()*f+u)*d,g=p/2-h*d,m=Ko.translate(A,g).scale(d);Xo.transition().duration(750).call(gi.transform,m)}})),t.next=37,Ei({data:o,config:i,queryResponse:a,vizInstance:r});case 37:t.next=45;break;case 39:throw t.prev=39,t.t0=t.catch(24),console.error("[MapRenderer renderMap] Error loading map data:",t.t0),e.innerHTML='<p style="color: red; padding: 20px;">Error: Could not load map geography.</p>',r&&"function"==typeof r.addError&&r.addError({title:"Map Load Error",message:"Could not load map geography."}),t.t0;case 45:Fo(e).select(".map-zoom-controls").remove(),f=Fo(e).append("div").attr("class","map-zoom-controls"),(p=f.append("div").attr("class","zoom-in-out-group")).append("button").attr("title","Zoom In").html("+").on("click",(function(){Xo&&gi&&Xo.transition().duration(250).call(gi.scaleBy,1.2)})),p.append("button").attr("title","Zoom Out").html("&ndash;").attr("class","zoom-out-btn").on("click",(function(){Xo&&gi&&Xo.transition().duration(250).call(gi.scaleBy,1/1.2)})),f.append("button").attr("class","zoom-reset-button").attr("title","Reset Zoom").text("Reset").on("click",(function(){Xo&&gi&&Ai&&Xo.transition().duration(250).call(gi.transform,Ai)})),console.log("%c[MapRenderer renderMap - OLD LOGIC TEST] Exit","color: green; font-weight: bold;");case 52:case"end":return t.stop()}}),t,null,[[24,39]])}))),Ci.apply(this,arguments)}function Ei(t){return xi.apply(this,arguments)}function xi(){return xi=di(fi().mark((function t(n){var e,r,o,i,a,s;return fi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.data,r=n.config,o=n.queryResponse,n.vizInstance,i=n.deselect,a=void 0!==i&&i,console.log("%c[MapRenderer updateMap - OLD LOGIC TEST] Entry","color: orange; font-weight: bold;"),Xo&&Zo&&!Zo.empty()){t.next=5;break}return console.warn("[MapRenderer updateMap] SVG or countryPaths not ready. Bailing."),t.abrupt("return",Promise.resolve());case 5:if(!(!(s=Xo.node())||s.clientWidth<10||s.clientHeight<10)){t.next=9;break}return console.warn("[MapRenderer updateMap] SVG dimensions too small. Skipping."),t.abrupt("return",Promise.resolve());case 9:return a&&vi&&(Xo.selectAll("path.country").filter((function(t){return t.id===vi})).classed("active",!1).style("fill",(function(t){var n=bi(t.properties.name,e,o);return n&&n.length>0?r.map_color_default||"#cccccc":"#EAEAEA"})),vi=null),Zo.each((function(t){var n=t.properties.name,i=Fo(this),a=bi(n,e,o);i.classed("has-data",!!(a&&a.length>0)).style("cursor",a&&a.length>0?"pointer":"default"),vi!==t.id?i.style("fill",a&&a.length>0?r.map_color_default||"#cccccc":"#EAEAEA"):(i.style("fill",a&&a.length>0?r.map_color_selected||"#e55353":"#EAEAEA"),a&&0!==a.length||i.classed("active",!1))})),console.log("%c[MapRenderer updateMap - OLD LOGIC TEST] Exit","color: orange; font-weight: bold;"),t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t)}))),xi.apply(this,arguments)}function Bi(t){return function(t){if(Array.isArray(t))return ki(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return ki(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ki(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Si(t){var n=t.data,e=(t.element,t.tableContainer),r=t.config,o=t.queryResponse,i=t.vizInstance,a=t.highlightCountryName,s=t.done;console.log("%c[AdvTable] renderAdvancedTable Called","color: Fuchsia; font-weight: bold;");try{console.log("[AdvTable] Config:",r?JSON.parse(JSON.stringify(r)):"No config"),console.log("[AdvTable] QueryResponse Provided:",!!o),o&&o.fields?console.log("[AdvTable] QueryResponse Fields:",JSON.parse(JSON.stringify({dimensions:o.fields.dimensions,measures:o.fields.measures,table_calculations:o.fields.table_calculations,pivots:o.fields.pivots}))):console.warn("[AdvTable] QueryResponse or queryResponse.fields is missing."),console.log("[AdvTable] Data Sample (first row if exists):",n&&n.length>0?JSON.parse(JSON.stringify(n[0])):"No data or empty data array"),console.log("[AdvTable] LookerCharts.Utils available:","undefined"!=typeof LookerCharts&&LookerCharts.Utils&&"function"==typeof LookerCharts.Utils.textForCell&&"function"==typeof LookerCharts.Utils.htmlForCell)}catch(t){console.error("[AdvTable] Error logging diagnostic info:",t)}try{i&&"function"==typeof i.clearErrors&&i.clearErrors(),e.innerHTML="";var l=document.createElement("div");l.className="advanced-table-header-controls-wrapper";var c=r.table_title_text||"Quick facts",u=document.createElement("h2");u.className="advanced-table-title font-clario font-size-h2",u.textContent=c,e.appendChild(u);var h=document.createElement("div");if(h.id="".concat(i._vizId,"-table-controls-placeholder"),l.appendChild(h),e.appendChild(l),!n||0===n.length){console.log("[AdvTable] No data provided to render table content.");var f=document.createElement("p");return f.style.padding="10px",f.style.textAlign="center",f.textContent="No data to display in table.",e.appendChild(f),void(s&&s())}var p=o&&o.fields&&o.fields.dimensions?o.fields.dimensions:[],d=o&&o.fields&&o.fields.measures?o.fields.measures:[],A=o&&o.fields&&o.fields.table_calculations?o.fields.table_calculations:[];console.log("[AdvTable] Processing Fields: ".concat(p.length," dims, ").concat(d.length," measures, ").concat(A.length," table calcs."));var g=p.length>0?p[0].name:null,m=[].concat(Bi(p),Bi(d),Bi(A)),v=r.comments_field_name,y=m.filter((function(t){return!(!t||t.hidden||v&&t.name===v||"field"===r.profile_button_link_source&&r.profile_button_url_field&&t.name===r.profile_button_url_field)}));if(!(0!==y.length||v&&m.find((function(t){return t&&t.name===v})))){console.log("[AdvTable] No visible fields to display in table after filtering.");var b=document.createElement("p");return b.style.padding="10px",b.style.textAlign="center",b.textContent="No visible fields selected for table display.",e.appendChild(b),void(s&&s())}var _=document.createElement("table"),w=document.createElement("thead"),C=document.createElement("tbody"),E=document.createElement("tr");if(y.forEach((function(t){var n=document.createElement("th"),e=r.show_full_field_name?t.label||t.name:t.label_short||t.label||t.name;e&&""!==String(e).trim()||(e=t.name),n.textContent="undefined"!=typeof LookerCharts&&LookerCharts.Utils&&LookerCharts.Utils.textForCell?LookerCharts.Utils.textForCell({value:e}):e,E.appendChild(n)})),v&&m.find((function(t){return t&&t.name===v}))){var x=document.createElement("th");x.textContent=r.comments_column_header_text||"Comments",E.appendChild(x)}w.appendChild(E),_.appendChild(w);var B=void 0,k=y.length>0&&p.find((function(t){return t&&y[0]&&t.name===y[0].name}))?y[0]:null,S=k?k.name:null;n.forEach((function(t,n){var e=document.createElement("tr");a&&g&&t[g]&&t[g].value===a&&e.classList.add("highlighted-row");var o=null,i=!1;if(S&&t[S]&&(o=t[S].value,0!==n&&o===B||(i=!0),i&&n>0&&r.group_first_column&&e.classList.add("group-divider-top")),y.forEach((function(n,o){var a=document.createElement("td"),s=t[n.name],l="",c="",u=n.name?n.name.replace(/\./g,"_"):"col_".concat(o),h="".concat(u,"_is_check_column");if(r[h]){c="check-column-cell";var f,p=s?s.value:null;f=null==p?"null":""===String(p).trim()?"empty":String(p).trim().toLowerCase();for(var d=r["".concat(u,"_default_symbol")]||"•",A=r["".concat(u,"_default_color")]||"#333333",g=1;g<=3;g++){var m=(r["".concat(u,"_map_").concat(g,"_value")]||"").trim().toLowerCase();if(m&&""!==m&&f===m){d=r["".concat(u,"_map_").concat(g,"_symbol")]||d,A=r["".concat(u,"_map_").concat(g,"_color")]||A;break}}var v="undefined"!=typeof LookerCharts&&LookerCharts.Utils&&LookerCharts.Utils.textForCell?LookerCharts.Utils.textForCell({value:d}):d;l='<span class="check-symbol" style="color: '.concat(A,';">').concat(v,"</span>")}else r.group_first_column&&S===n.name?l=i?"undefined"!=typeof LookerCharts&&LookerCharts.Utils&&LookerCharts.Utils.htmlForCell&&s?LookerCharts.Utils.htmlForCell(s):String(s&&null!==s.value&&void 0!==s.value?s.value:""):"":s&&(l="undefined"!=typeof LookerCharts&&LookerCharts.Utils&&LookerCharts.Utils.htmlForCell?LookerCharts.Utils.htmlForCell(s):String(null!==s.value&&void 0!==s.value?s.value:""));a.innerHTML=l,c&&(a.className=c),n.is_numeric&&!r[h]&&a.classList.add("numeric-cell"),e.appendChild(a)})),v&&m.find((function(t){return t&&t.name===v}))){var s=document.createElement("td"),l=t[v],c=l?l.value:null;if(c&&""!==String(c).trim()){var u=String(c).replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s.innerHTML='<span class="comment-button" data-comment="'.concat(u,'">').concat(r.comments_button_text||"View >","</span>")}else s.textContent=r.comments_no_comments_text||"–";e.appendChild(s)}C.appendChild(e),S&&t[S]&&(B=o)})),_.appendChild(C),e.appendChild(_),s&&s()}catch(t){console.error("[AdvTable] Error in renderAdvancedTable:",t,t.stack),i&&"function"==typeof i.addError&&i.addError({title:"Advanced Table Rendering Error",message:String(t)}),s&&s()}}function zi(t){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi(t)}function Mi(){Mi=function(){return n};var t,n={},e=Object.prototype,r=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,n,e,r){Object.defineProperty(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function c(n,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype);return l(a,"_invoke",function(n,e,r){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=_(s,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var c=u(n,e,r);if("normal"===c.type){if(o=r.done?4:2,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=4,r.method="throw",r.arg=c.arg)}}}(n,r,new E(o||[])),!0),a}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=c;var h={};function f(){}function p(){}function d(){}var A={};l(A,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==e&&r.call(m,i)&&(A=m);var v=d.prototype=f.prototype=Object.create(A);function y(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function e(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==zi(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):n.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,s)}))}s(l.arg)}var o;l(this,"_invoke",(function(t,r){function i(){return new n((function(n,o){e(t,r,n,o)}))}return o=o?o.then(i,i):i()}),!0)}function _(n,e){var r=e.method,o=n.i[r];if(o===t)return e.delegate=null,"throw"===r&&n.i.return&&(e.method="return",e.arg=t,_(n,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(o,n.i,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[n.r]=a.value,e.next=n.n,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function w(t){this.tryEntries.push(t)}function C(n){var e=n[4]||{};e.type="normal",e.arg=t,n[4]=e}function E(t){this.tryEntries=[[-1]],t.forEach(w,this),this.reset(!0)}function x(n){if(null!=n){var e=n[i];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,a=function e(){for(;++o<n.length;)if(r.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(zi(n)+" is not iterable")}return p.prototype=d,l(v,"constructor",d),l(d,"constructor",p),l(d,s,p.displayName="GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},n.awrap=function(t){return{__await:t}},y(b.prototype),l(b.prototype,a,(function(){return this})),n.AsyncIterator=b,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new b(c(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(v),l(v,s,"Generator"),l(v,i,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}},n.values=x,E.prototype={constructor:E,reset:function(n){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!n)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t){a.type="throw",a.arg=n,e.next=t}for(var o=e.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,l=i[1],c=i[2];if(-1===i[0])return r("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<l)return this.method="next",this.arg=t,r(l),!0;if(s<c)return r(c),!1}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===t||"continue"===t)&&o[0]<=n&&n<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=n,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[2]===t)return this.complete(e[4],e[3]),C(e),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e[0]===t){var r=e[4];if("throw"===r.type){var o=r.arg;C(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(n,e,r){return this.delegate={i:x(n),r:e,n:r},"next"===this.method&&(this.arg=t),h}},n}function Ii(t){return function(t){if(Array.isArray(t))return Ti(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Ti(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ti(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Ni(t,n,e,r,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void e(t)}s.done?n(l):Promise.resolve(l).then(r,o)}var Li,Ri,qi=function(t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null};looker.plugins.visualizations.add({id:"map_table_viz",label:"Map & Table View",options:m,create:function(t,n){var e=this;this._element=t,this._vizId="viz-container-"+Date.now(),this._sidebarOpen=!1,this._mapRendered=!1,this._isUpdating=!1,this._lastKnownMapHostWidth=0,this._lastKnownMapHostHeight=0,this._lastShownCountryDataRow=null,this._lastShownCountryDataRowsArray=null,this._previousConfig={},this._allCountryNames=[],this._lastQueryFields=null,this._selectedCountryName=null,this._element.innerHTML='\n      <div class="viz-main-container">\n        <div id="'.concat(this._vizId,'-search-container" class="map-search-container">\n          <input type="search" id="').concat(this._vizId,'-search-input" placeholder="Search country..." style="width: 180px; height: 32px; padding: 6px 10px; border-radius: 3px 0 0 3px; border: 1px solid #ccc; outline: none; box-sizing: border-box;">\n          <button id="').concat(this._vizId,'-search-dropdown-btn" class="search-dropdown-btn" style="height: 32px; width: 32px; padding: 0 8px; border: 1px solid #ccc; border-left: none; border-radius: 0 3px 3px 0; background-color: #f0f0f0; color: #333; cursor: pointer; display: flex; align-items: center; justify-content: center; box-sizing: border-box;"><svg viewBox="0 0 24 24" height="1em" width="1em" fill="currentColor"><path d="M7 10l5 5 5-5z"></path></svg></button>\n          <div id="').concat(this._vizId,'-autocomplete-list" class="autocomplete-list" style="display:none; position: absolute; top: 100%; left: 0; right: 0; z-index: 1003; max-height: 200px; overflow-y: auto; border: 1px solid #ccc; border-top: none; background-color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.15);"></div>\n        </div>\n        <div class="view-toggle-controls"> \n          <div class="view-buttons">\n            <button id="').concat(this._vizId,'-map-btn" class="view-btn font-size-h4">Map</button>\n            <button id="').concat(this._vizId,'-table-btn" class="view-btn font-size-h4">Table</button>\n          </div>\n        </div>\n        <div id="').concat(this._vizId,'-map-host" class="content-host map-content-host"></div>\n        <div id="').concat(this._vizId,'-table-host" class="content-host table-content-host" style="display:none;"></div>\n        <div id="').concat(this._vizId,'-sidebar" class="sidebar">\n            <button id="').concat(this._vizId,'-sidebar-close" class="sidebar-close-button">&times;</button>\n            <div id="').concat(this._vizId,'-sidebar-content"></div>\n            <div class="sidebar-footer">\n                <button id="').concat(this._vizId,'-country-profile-btn" class="sidebar-footer-btn profile-btn font-size-h4">Country profile</button>\n                <button id="').concat(this._vizId,'-sidebar-footer-close-btn" class="sidebar-footer-btn close-btn font-size-h4">Close</button>\n            </div>\n        </div>\n      </div>\n    '),this._mapHostEl=this._element.querySelector("#".concat(this._vizId,"-map-host")),this._tableHostEl=this._element.querySelector("#".concat(this._vizId,"-table-host")),this._mapButton=this._element.querySelector("#".concat(this._vizId,"-map-btn")),this._tableButton=this._element.querySelector("#".concat(this._vizId,"-table-btn")),this._sidebar=this._element.querySelector("#".concat(this._vizId,"-sidebar")),this._sidebarContent=this._element.querySelector("#".concat(this._vizId,"-sidebar-content")),this._sidebarCloseButton=this._element.querySelector("#".concat(this._vizId,"-sidebar-close")),this._sidebarFooterCloseButton=this._element.querySelector("#".concat(this._vizId,"-sidebar-footer-close-btn")),this._countryProfileButton=this._element.querySelector("#".concat(this._vizId,"-country-profile-btn")),this._viewToggleControlsEl=this._element.querySelector(".view-toggle-controls"),this._viewToggleControlsOriginalParent=this._viewToggleControlsEl.parentNode,this._viewToggleControlsOriginalNextSibling=this._viewToggleControlsEl.nextSibling,this._searchContainer=this._element.querySelector("#".concat(this._vizId,"-search-container")),this._searchInput=this._element.querySelector("#".concat(this._vizId,"-search-input")),this._searchDropdownButton=this._element.querySelector("#".concat(this._vizId,"-search-dropdown-btn")),this._autocompleteListDiv=this._element.querySelector("#".concat(this._vizId,"-autocomplete-list")),this._currentView=n.default_view||"map",this._data=[],this._config=n,this._queryResponse={},this._details={};var r=function(t){var n=e._currentView;if((e._currentView!==t||"map"===t&&!e._mapRendered)&&(e._currentView=t,e._sidebarOpen&&e._hideCountrySidebar({preserveSelection:!0}),e._showHideViewContainers(),e._updateButtonStates(),e._updateSearchVisibility(),"map"===t&&e._repositionViewToggleControls("map"),n!==t||"map"===t&&!e._mapRendered||"table"===t)){"map"===t&&(e._mapRendered=!1);var r="undefined"!=typeof LookerCharts&&LookerCharts.Done?LookerCharts.Done:function(){};"function"==typeof e.updateAsync&&e.updateAsync(e._data,e._element,e._config,e._queryResponse,{triggerSource:"switchView"},r)}};this._mapButton.addEventListener("click",(function(){return r("map")})),this._tableButton.addEventListener("click",(function(){return r("table")})),this._sidebarCloseButton.addEventListener("click",(function(){return e._hideCountrySidebar()})),this._sidebarFooterCloseButton.addEventListener("click",(function(){return e._hideCountrySidebar()})),this._countryProfileButton.addEventListener("click",(function(){var t="",n=e._config.profile_button_url_field;if(n&&e._sidebarOpen&&e._lastShownCountryDataRowsArray&&e._lastShownCountryDataRowsArray.length>0){var r=e._lastShownCountryDataRowsArray.find((function(t){return t[n]&&t[n].value&&""!==(""+t[n].value).trim()}));r&&(t=r[n].value)}if(t&&"string"==typeof t&&""!==t.trim()){var o=t.trim();/^https?:\/\//i.test(o)||(o="https://"+o),window.open(o,"_blank")}})),this._searchInput.addEventListener("input",(function(){return e._handleInputChange()})),this._searchInput.addEventListener("keypress",(function(t){if("Enter"===t.key){t.preventDefault();var n=e._autocompleteListDiv.querySelector(".autocomplete-item");"block"===e._autocompleteListDiv.style.display&&n&&e._searchInput.value.trim().toLowerCase()===n.textContent.trim().toLowerCase()?(e._searchInput.value=n.textContent,e._autocompleteListDiv.style.display="none",e._handleSearch(n.textContent)):e._handleSearch()}})),this._searchInput.addEventListener("focus",(function(){""===e._searchInput.value.trim()||e._handleInputChange()})),this._searchDropdownButton.addEventListener("click",(function(t){t.stopPropagation(),e._toggleCountryList()})),document.addEventListener("click",(function(t){e._searchContainer&&!e._searchContainer.contains(t.target)&&e._autocompleteListDiv&&(e._autocompleteListDiv.style.display="none")})),this._updateButtonStates(),this._showHideViewContainers(),this._updateSearchVisibility()},updateAsync:(Li=Mi().mark((function t(n,e,r,o,i,a){var s,l,c,u,h,f,p,d,A,g,v;return Mi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isUpdating||i&&"switchView"===i.triggerSource){t.next=3;break}return a&&a(),t.abrupt("return");case 3:if(this._isUpdating=!0,s=o.fields?JSON.stringify(o.fields):"",(!this._lastQueryFields||this._lastQueryFields!==s)&&((l=[]).push({"Select a Field":""}),o.fields&&[].concat(Ii(o.fields.dimensions||[]),Ii(o.fields.measures||[]),Ii(o.fields.table_calculations||[])).forEach((function(t){var n={};n[t.label]=t.name,l.push(n)})),m.profile_button_url_field.values=l,this.trigger("registerOptions",m),this._lastQueryFields=s),this._config,this._element=e,this._config=r,this._data=n,this._queryResponse=o,this._details=i,this._mapHostEl=this._element.querySelector("#".concat(this._vizId,"-map-host")),this._tableHostEl=this._element.querySelector("#".concat(this._vizId,"-table-host")),this._sidebar=this._element.querySelector("#".concat(this._vizId,"-sidebar")),this._sidebarContent=this._element.querySelector("#".concat(this._vizId,"-sidebar-content")),this._viewToggleControlsEl=this._element.querySelector(".view-toggle-controls"),this._mapButton=this._element.querySelector("#".concat(this._vizId,"-map-btn")),this._tableButton=this._element.querySelector("#".concat(this._vizId,"-table-btn")),this._sidebarCloseButton=this._element.querySelector("#".concat(this._vizId,"-sidebar-close")),this._sidebarFooterCloseButton=this._element.querySelector("#".concat(this._vizId,"-sidebar-footer-close-btn")),this._countryProfileButton=this._element.querySelector("#".concat(this._vizId,"-country-profile-btn")),this._searchContainer=this._element.querySelector("#".concat(this._vizId,"-search-container")),this._searchInput=this._element.querySelector("#".concat(this._vizId,"-search-input")),this._searchDropdownButton=this._element.querySelector("#".concat(this._vizId,"-search-dropdown-btn")),this._autocompleteListDiv=this._element.querySelector("#".concat(this._vizId,"-autocomplete-list")),this._countryProfileButton&&(this._countryProfileButton.textContent=r.country_profile_button_text||"Country profile"),c=this._viewToggleControlsEl?this._viewToggleControlsEl.parentNode:null,u=this._tableHostEl?this._tableHostEl.querySelector("#".concat(this._vizId,"-table-controls-placeholder")):null,!this._viewToggleControlsEl||c===this._viewToggleControlsOriginalParent||u&&u.contains(this._viewToggleControlsEl)||(this._viewToggleControlsOriginalParent=this._element.querySelector(".viz-main-container"),this._viewToggleControlsOriginalNextSibling=this._element.querySelector("#".concat(this._vizId,"-map-host")),console.warn("[Vis UpdateAsync] Re-anchored _viewToggleControlsOriginalParent due to detected DOM change.")),this._queryResponse&&this._queryResponse.fields&&this._queryResponse.fields.dimensions&&this._queryResponse.fields.dimensions.length>0?(h=this._queryResponse.fields.dimensions[0].name,this._allCountryNames=Ii(new Set(this._data.map((function(t){return t&&t[h]&&t[h].value})).filter(Boolean))).sort()):this._allCountryNames=[],this._mapHostEl&&this._sidebar&&this._tableHostEl&&this._searchContainer&&this._viewToggleControlsEl){t.next=37;break}return console.error("%c[Vis UpdateAsync] CRITICAL: Core DOM elements missing after re-selection.","color: red; font-weight: bold;"),this._isUpdating=!1,a&&a(),t.abrupt("return");case 37:if(this.clearErrors("profile-button-hidden"),(f=this._config.profile_button_url_field)&&this._data.length>0&&void 0===this._data[0][f]&&this.addError({title:"URL Field Not Found in Data",message:'The selected URL field "'.concat(f,'" is not available in the query data. It may be hidden from the visualization. Please add the field to the Data section or un-hide it.'),group:"profile-button-hidden"}),p=r.sidebar_color?qi(r.sidebar_color):qi("#FFFFFF"),this._sidebar&&p&&(d=void 0!==r.sidebar_opacity?r.sidebar_opacity:.7,this._sidebar.style.backgroundColor="rgba(".concat(p.r,", ").concat(p.g,", ").concat(p.b,", ").concat(d,")")),this._showHideViewContainers(),this._updateButtonStates(),this._updateSearchVisibility(),this._sidebarOpen&&this._lastShownCountryDataRowsArray&&this._showCountrySidebar(this._lastShownCountryDataRowsArray),t.prev=46,"map"!==this._currentView){t.next=71;break}if(A=this._mapHostEl.clientWidth,g=this._mapHostEl.clientHeight,!(v=i&&i.changed&&i.changed.size)&&this._mapRendered&&(this._lastKnownMapHostWidth>0||this._lastKnownMapHostHeight>0)&&(Math.abs(A-this._lastKnownMapHostWidth)>5||Math.abs(g-this._lastKnownMapHostHeight)>5)&&(v=!0),!(A<10||g<10)){t.next=57;break}this._mapHostEl.innerHTML="<div style='padding:20px;color:grey;text-align:center;'>Map area too small.</div>",this._mapRendered=!1,t.next=68;break;case 57:if(!(!this._mapRendered||v||i&&"switchView"===i.triggerSource)){t.next=64;break}return this._mapRendered=!1,t.next=61,wi({element:this._mapHostEl,vizInstance:this,data:this._data,config:this._config,queryResponse:this._queryResponse});case 61:this._mapRendered=!0,t.next=66;break;case 64:return t.next=66,Ei({data:this._data,config:this._config,queryResponse:this._queryResponse,vizInstance:this});case 66:this._lastKnownMapHostWidth=A,this._lastKnownMapHostHeight=g;case 68:this._repositionViewToggleControls("map"),t.next=72;break;case 71:"table"===this._currentView&&(Si({data:this._data,element:this._element,tableContainer:this._tableHostEl,config:this._config,queryResponse:this._queryResponse,vizInstance:this,highlightCountryName:this._selectedCountryName,done:null}),this._repositionViewToggleControls("table"));case 72:t.next=78;break;case 74:t.prev=74,t.t0=t.catch(46),console.error("[Vis UpdateAsync] Error during view rendering or subsequent repositioning:",t.t0,t.t0.stack),"function"==typeof this.addError&&this.addError({title:"View Rendering Error",message:t.t0.message||String(t.t0)});case 78:this._isUpdating=!1,a&&a();case 80:case"end":return t.stop()}}),t,this,[[46,74]])})),Ri=function(){var t=this,n=arguments;return new Promise((function(e,r){var o=Li.apply(t,n);function i(t){Ni(o,e,r,i,a,"next",t)}function a(t){Ni(o,e,r,i,a,"throw",t)}i(void 0)}))},function(t,n,e,r,o,i){return Ri.apply(this,arguments)}),_repositionViewToggleControls:function(t){if(this._viewToggleControlsEl){if(!this._viewToggleControlsOriginalParent||!document.body.contains(this._viewToggleControlsOriginalParent)){if(this._viewToggleControlsOriginalParent=this._element.querySelector(".viz-main-container"),this._viewToggleControlsOriginalNextSibling=this._element.querySelector("#".concat(this._vizId,"-map-host")),!this._viewToggleControlsOriginalParent)return void console.error("[Vis _repositionViewToggleControls] Critical: Original parent container (.viz-main-container) not found. Cannot reposition controls.");console.warn("[Vis _repositionViewToggleControls] Re-established _viewToggleControlsOriginalParent to .viz-main-container.")}var n="".concat(this._vizId,"-table-controls-placeholder"),e=this._tableHostEl?this._tableHostEl.querySelector("#".concat(n)):null;if("table"===t)e?(this._viewToggleControlsEl.parentNode!==e&&(e.appendChild(this._viewToggleControlsEl),console.log("[Vis _repositionViewToggleControls] Moved controls to TABLE placeholder (#".concat(n,")."))),this._viewToggleControlsEl.classList.add("controls-table-position")):(console.warn("[Vis _repositionViewToggleControls] Placeholder for TABLE view (#".concat(n,") not found. Attempting to restore to original position.")),this._viewToggleControlsOriginalParent&&this._viewToggleControlsEl.parentNode!==this._viewToggleControlsOriginalParent&&(this._viewToggleControlsOriginalParent.insertBefore(this._viewToggleControlsEl,this._viewToggleControlsOriginalNextSibling),console.log("[Vis _repositionViewToggleControls] Fallback: Moved controls to ORIGINAL position because table placeholder was not found.")),this._viewToggleControlsEl.classList.remove("controls-table-position"));else{if(this._viewToggleControlsOriginalParent)if(document.body.contains(this._viewToggleControlsOriginalParent))this._viewToggleControlsEl.parentNode!==this._viewToggleControlsOriginalParent&&(this._viewToggleControlsOriginalParent.insertBefore(this._viewToggleControlsEl,this._viewToggleControlsOriginalNextSibling),console.log("[Vis _repositionViewToggleControls] Moved controls to ORIGINAL (map view)."));else{console.error("[Vis _repositionViewToggleControls] Original parent for MAP view is detached and was not re-established. Controls may be misplaced.");var r=this._element.querySelector(".viz-main-container");r&&this._viewToggleControlsEl.parentNode!==r&&r.appendChild(this._viewToggleControlsEl)}else console.error("[Vis _repositionViewToggleControls] Original parent for MAP view is null. Controls cannot be reliably repositioned.");this._viewToggleControlsEl.classList.remove("controls-table-position")}}else console.warn("[Vis _repositionViewToggleControls] this._viewToggleControlsEl is not available.")},_handleInputChange:function(){if("map"===this._currentView&&this._searchInput&&this._allCountryNames){var t=this._searchInput.value.trim().toLowerCase();if(t){var n=this._allCountryNames.filter((function(n){return n.toLowerCase().includes(t)}));this._displayAutocomplete(n,!1)}else this._autocompleteListDiv&&(this._autocompleteListDiv.style.display="none")}else this._autocompleteListDiv&&(this._autocompleteListDiv.style.display="none")},_displayAutocomplete:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._autocompleteListDiv){this._autocompleteListDiv.innerHTML="";var r=e?t:t.slice(0,15);r.length>0?(r.forEach((function(t){var e=document.createElement("div");e.textContent=t,e.classList.add("autocomplete-item","font-size-h4"),e.addEventListener("click",(function(e){e.stopPropagation(),n._searchInput.value=t,n._autocompleteListDiv.style.display="none",n._handleSearch(t)})),n._autocompleteListDiv.appendChild(e)})),this._autocompleteListDiv.style.display="block"):this._autocompleteListDiv.style.display="none"}},_toggleCountryList:function(){"map"===this._currentView&&this._autocompleteListDiv&&this._allCountryNames&&("block"===this._autocompleteListDiv.style.display?this._autocompleteListDiv.style.display="none":this._displayAutocomplete(this._allCountryNames,!0))},_handleSearch:function(t){if("map"===this._currentView&&this._mapRendered){var n=t||(this._searchInput?this._searchInput.value.trim():"");n&&(console.log("[_handleSearch] Searching for country: ".concat(n)),function(t,n){if(console.log("%c[MapRenderer selectCountryByNameOnMap] Searching for: ".concat(t),"color: DarkOrchid; font-weight: bold;"),Xo&&Zo&&!Zo.empty()&&mi&&gi){var e=Xo.node();if(!e||e.clientWidth<10||e.clientHeight<10)console.warn("[MapRenderer selectCountryByNameOnMap] SVG dimensions too small.");else{var r=null;Zo.each((function(n){n.properties.name.toLowerCase()===t.toLowerCase()&&(r=n)}));var o=bi(t,n._data,n._queryResponse);if(r&&o&&o.length>0){console.log("[MapRenderer selectCountryByNameOnMap] Found data for ".concat(t,":"),o),vi&&vi!==r.id&&Xo.selectAll("path.country").filter((function(t){return t.id===vi})).classed("active",!1).style("fill",(function(t){var e=bi(t.properties.name,n._data,n._queryResponse);return e&&e.length>0?n._config.map_color_default||"#cccccc":"#EAEAEA"})),vi=r.id,Xo.selectAll("path.country").filter((function(t){return t.id===r.id})).classed("active",!0).style("fill",n._config.map_color_selected||"#e55353").raise(),yi=Xo.selectAll("path.country").filter((function(t){return t.id===r.id})),n._showCountrySidebar(o);var i=mi.bounds(r),a=i[1][0]-i[0][0],s=i[1][1]-i[0][1],l=(i[0][0]+i[1][0])/2,c=(i[0][1]+i[1][1])/2,u=parseFloat(Xo.attr("width")),h=parseFloat(Xo.attr("height"));if(u<1||h<1||0===a||0===s)return void console.warn("[MapRenderer selectCountryByNameOnMap] Cannot zoom: invalid dimensions for map or feature.");var f=Math.min(8,Math.max(.5,.9/Math.max(a/u,s/h))),p=u/2-l*f,d=h/2-c*f,A=Ko.translate(p,d).scale(f);Xo.transition().duration(750).call(gi.transform,A)}else{var g='Country "'.concat(t,r?'" found, but no data is available for it.':'" not found on map.');console.warn("[MapRenderer selectCountryByNameOnMap] ".concat(g)),vi&&(Xo.selectAll("path.country").filter((function(t){return t.id===vi})).classed("active",!1).style("fill",(function(t){var e=bi(t.properties.name,n._data,n._queryResponse);return e&&e.length>0?n._config.map_color_default||"#cccccc":"#EAEAEA"})),vi=null),n._hideCountrySidebar(),n&&"function"==typeof n.addError&&n.addError({title:"Search Notice",message:g})}console.log("%c[MapRenderer selectCountryByNameOnMap] Exit.","color: DarkOrchid; font-weight: bold;")}}else console.warn("[MapRenderer selectCountryByNameOnMap] Map components not ready.")}(n,this),this._autocompleteListDiv&&(this._autocompleteListDiv.style.display="none"))}else console.log("[_handleSearch] Search ignored, not in map view or map not rendered.")},_updateSearchVisibility:function(){this._searchContainer&&("map"===this._currentView?this._searchContainer.style.display="flex":(this._searchContainer.style.display="none",this._searchInput&&(this._searchInput.value=""),this._autocompleteListDiv&&(this._autocompleteListDiv.style.display="none")))},_showCountrySidebar:function(t){var n=this;if(t&&0!==t.length){var e=t[0];if(this._sidebar&&this._sidebarContent&&this._config&&this._queryResponse&&this._queryResponse.fields&&this._queryResponse.fields.dimensions&&0!==this._queryResponse.fields.dimensions.length){this._lastShownCountryDataRow=e,this._lastShownCountryDataRowsArray=t;var r=this._queryResponse.fields.dimensions[0],o="Details";e[r.name]&&void 0!==e[r.name].value?(this._selectedCountryName=e[r.name].value,o=e[r.name].value,e[r.name].rendered?o=e[r.name].rendered:"undefined"!=typeof LookerCharts&&LookerCharts.Utils&&LookerCharts.Utils.textForRawNumber&&(o=LookerCharts.Utils.textForRawNumber(o))):e.properties&&e.properties.name?(o=e.properties.name,this._selectedCountryName=o):this._selectedCountryName=null;var i='\n      <div class="sidebar-header">\n        <h2 class="sidebar-main-title font-clario font-size-h2">Quick Facts</h2>\n        <h3 class="sidebar-country-name font-clario font-size-h3">'.concat(o,"</h3>\n      </div>\n    ");i+='<div class="sidebar-fact-list grouped-facts">',[].concat(Ii(this._queryResponse.fields.dimensions),Ii(this._queryResponse.fields.measures),Ii(this._queryResponse.fields.table_calculations||[])).forEach((function(e){if(e.name!==r.name&&(!n._config.profile_button_url_field||e.name!==n._config.profile_button_url_field)){var o=new Set;if(t.forEach((function(t){if(t[e.name]){var n="undefined"!=typeof LookerCharts&&LookerCharts.Utils&&LookerCharts.Utils.htmlForCell?LookerCharts.Utils.htmlForCell(t[e.name]):t[e.name].rendered||String(t[e.name].value);o.add(n)}})),o.size>0){i+='\n                <div class="fact-item grouped">\n                    <div class="fact-label font-clario font-size-h4">'.concat(e.label_short||e.label||e.name,'</div>\n                    <ul class="fact-value-list font-size-h4">');var a=o.size>1;o.forEach((function(t){i+='<li class="'.concat(a?"fact-value-list-item has-bullet":"fact-value-list-item",'">').concat(t,"</li>")})),i+="\n                    </ul>\n                </div>\n            "}}})),i+="</div>",this._sidebarContent.innerHTML=i;var a=!1,s=this._config.profile_button_url_field;s&&t&&t.some((function(t){return t[s]&&t[s].value&&""!==String(t[s].value).trim()}))&&(a=!0),this._countryProfileButton&&(this._countryProfileButton.style.display=a?"inline-block":"none"),this._sidebar.classList.add("open"),this._sidebarOpen=!0}}else this._hideCountrySidebar()},_hideCountrySidebar:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preserveSelection;void 0!==t&&t||(this._selectedCountryName=null,this._lastShownCountryDataRow=null,this._lastShownCountryDataRowsArray=null,"map"===this._currentView&&this._mapRendered&&this._data&&this._config&&this._queryResponse&&Ei({data:this._data,config:this._config,queryResponse:this._queryResponse,vizInstance:this,deselect:!0}).catch((function(t){return console.error("[Vis _hideCountrySidebar] Error in updateMap:",t)}))),this._countryProfileButton&&(this._countryProfileButton.style.display="none"),this._sidebar&&(this._sidebar.classList.remove("open"),this._sidebarOpen=!1)},_updateButtonStates:function(){this._mapButton&&this._tableButton&&("map"===this._currentView?(this._mapButton.classList.add("active"),this._tableButton.classList.remove("active")):(this._tableButton.classList.add("active"),this._mapButton.classList.remove("active")))},_showHideViewContainers:function(){this._mapHostEl&&this._tableHostEl&&("map"===this._currentView?(this._mapHostEl.style.display="block",this._tableHostEl.style.display="none"):"table"===this._currentView&&(this._tableHostEl.style.display="block",this._mapHostEl.style.display="none"))}})})();
//# sourceMappingURL=map.js.map